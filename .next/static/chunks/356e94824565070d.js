(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87246,e=>{"use strict";var t=e.i(3008);function r({width:e,height:r,className:i,variant:l="text"}){let n={};return e&&(n.width="number"==typeof e?`${e}px`:e),r&&(n.height="number"==typeof r?`${r}px`:r),"circular"===l&&(n.borderRadius="50%"),(0,t.jsx)("div",{className:`${"text"===l?"skeleton skeleton-text":"card"===l?"skeleton skeleton-card":"skeleton"} ${i||""}`,style:n})}e.s(["Skeleton",()=>r])},15332,e=>{"use strict";var t=e.i(3008),r=e.i(21453);e.i(37181);var i=e.i(4977),l=e.i(79317),n=e.i(28463),s=e.i(81304),c=e.i(15745),o=e.i(39911),d=e.i(49830),u=e.i(57512),a=e.i(27808),h=e.i(87246),p=e.i(9165),x=e.i(20437),f=e.i(15236);function j(){let{cart:e,updateQty:j,remove:m}=(0,f.useCart)(),[y,k]=(0,r.useState)({}),[g,v]=(0,r.useState)(!0),[B,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{0===(0,x.getCart)().length?v(!1):(async()=>{try{let e=await (0,p.apiGet)("/api/products"),t={};for(let r of e)t[r.id]=r;k(t),b(null)}catch(e){console.error(e),b("Не удалось загрузить данные товаров")}finally{v(!1)}})()},[]);let I=(0,r.useMemo)(()=>{let t=0;for(let r of e){let e=y[r.productId];e&&(t+=e.priceKopeks*r.qty)}return t},[e,y]),S=(0,r.useMemo)(()=>{let t=e.find(e=>y[e.productId]);return t?y[t.productId].currency:"RUB"},[e,y]),z=(t,r)=>{let i=e.find(e=>e.productId===t),l=i?.qty??0;r<0&&l<=1?m(t):j(t,l+r)},C=e.length>0&&I>0,K=C?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{style:{marginBottom:12,fontSize:18,fontWeight:600},children:["Итого: ",(0,t.jsx)(a.Price,{amountKopeks:I,currency:S})]}),(0,t.jsx)(c.Link,{href:"/checkout",children:(0,t.jsx)(i.Button,{size:"m",mode:"filled",stretched:!0,children:"Перейти к оплате"})})]}):null;return(0,t.jsx)(o.Page,{children:(0,t.jsx)(d.AppShell,{title:"Корзина",showBottomNav:!0,stickyBottom:K,children:(0,t.jsx)(n.List,{children:(0,t.jsxs)(s.Section,{header:"Товары в корзине",children:[g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Skeleton,{variant:"card"}),(0,t.jsx)(h.Skeleton,{variant:"card"})]}),!g&&B&&(0,t.jsx)(u.Banner,{type:"error",children:B}),!g&&!B&&!C&&(0,t.jsxs)(u.Banner,{type:"info",children:["Корзина пуста."," ",(0,t.jsx)(c.Link,{href:"/catalog",children:"Перейти в каталог"})]}),!g&&!B&&C&&e.map(e=>{let r=y[e.productId];if(!r)return null;let n=r.priceKopeks*e.qty;return(0,t.jsx)(l.Cell,{subtitle:(0,t.jsx)(a.Price,{amountKopeks:n,currency:r.currency}),after:(0,t.jsxs)("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[(0,t.jsx)(i.Button,{size:"s",mode:"bezeled",onClick:()=>z(e.productId,-1),children:"-"}),(0,t.jsx)("span",{style:{minWidth:"24px",textAlign:"center"},children:e.qty}),(0,t.jsx)(i.Button,{size:"s",mode:"bezeled",onClick:()=>z(e.productId,1),children:"+"}),(0,t.jsx)(i.Button,{size:"s",mode:"bezeled",onClick:()=>{m(e.productId)},style:{color:"var(--tg-theme-destructive-text-color, #ff3b30)"},children:"✕"})]}),children:r.title},e.productId)})]})})})})}e.s(["default",()=>j])}]);