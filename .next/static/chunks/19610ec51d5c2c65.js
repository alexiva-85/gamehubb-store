(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,44460,67900,68896,62368,59547,e=>{"use strict";let t,s,r,n;function i(e){return{lang:e?.lang??t?.lang,message:e?.message,abortEarly:e?.abortEarly??t?.abortEarly,abortPipeEarly:e?.abortPipeEarly??t?.abortPipeEarly}}function o(e,t,i,o,a){var u,l,c,p;let h,d=a&&"input"in a?a.input:i.value,f=a?.expected??e.expects??null,_=a?.received??("string"==(h=typeof d)?`"${d}"`:"number"===h||"bigint"===h||"boolean"===h?`${d}`:"object"===h||"function"===h?(d&&Object.getPrototypeOf(d)?.constructor?.name)??"null":h),m={kind:e.kind,type:e.type,input:d,expected:f,received:_,message:`Invalid ${t}: ${f?`Expected ${f} but r`:"R"}eceived ${_}`,requirement:e.requirement,path:a?.path,issues:a?.issues,lang:o.lang,abortEarly:o.abortEarly,abortPipeEarly:o.abortPipeEarly},b="schema"===e.kind,g=a?.message??e.message??(u=e.reference,l=m.lang,n?.get(u)?.get(l))??(b?(c=m.lang,r?.get(c)):null)??o.message??(p=m.lang,s?.get(p));void 0!==g&&(m.message="function"==typeof g?g(m):g),b&&(i.typed=!1),i.issues?i.issues.push(m):i.issues=[m]}function a(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},i())}}function u(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}var l,c,p=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function h(e,t){return{kind:"validation",type:"check",reference:h,async:!1,expects:null,requirement:e,message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&o(this,"input",e,t),e}}}function d(e){return{kind:"validation",type:"integer",reference:d,async:!1,expects:null,requirement:Number.isInteger,message:e,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&o(this,"integer",e,t),e}}}function f(e){return{kind:"transformation",type:"transform",reference:f,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function _(e,t,s){return"function"==typeof e.default?e.default(t,s):e.default}function m(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function b(){return{kind:"schema",type:"any",reference:b,expects:"any",async:!1,get"~standard"(){return a(this)},"~run":e=>(e.typed=!0,e)}}function g(e,t){return{kind:"schema",type:"array",reference:g,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){let s=e.value;if(Array.isArray(s)){e.typed=!0,e.value=[];for(let r=0;r<s.length;r++){let n=s[r],i=this.item["~run"]({value:n},t);if(i.issues){let o={type:"array",origin:"value",input:s,key:r,value:n};for(let t of i.issues)t.path?t.path.unshift(o):t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.push(i.value)}}else o(this,"type",e,t);return e}}}function v(e){return{kind:"schema",type:"boolean",reference:v,expects:"boolean",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:o(this,"type",e,t),e}}}function y(e){return{kind:"schema",type:"date",reference:y,expects:"Date",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?o(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:o(this,"type",e,t),e}}}function w(e){return{kind:"schema",type:"function",reference:w,expects:"Function",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"function"==typeof e.value?e.typed=!0:o(this,"type",e,t),e}}}function C(e,t){return{kind:"schema",type:"instance",reference:C,expects:e.name,async:!1,class:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:o(this,"type",e,t),e}}}function F(e,t){return{kind:"schema",type:"loose_object",reference:F,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){let s=e.value;if(s&&"object"==typeof s){for(let r in e.typed=!0,e.value={},this.entries){let n=this.entries[r];if(r in s||("exact_optional"===n.type||"optional"===n.type||"nullish"===n.type)&&void 0!==n.default){let i=r in s?s[r]:_(n),o=n["~run"]({value:i},t);if(o.issues){let n={type:"object",origin:"value",input:s,key:r,value:i};for(let t of o.issues)t.path?t.path.unshift(n):t.path=[n],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[r]=o.value}else if(void 0!==n.fallback)e.value[r]="function"==typeof n.fallback?n.fallback(void 0,void 0):n.fallback;else if("exact_optional"!==n.type&&"optional"!==n.type&&"nullish"!==n.type&&(o(this,"key",e,t,{input:void 0,expected:`"${r}"`,path:[{type:"object",origin:"key",input:s,key:r,value:s[r]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(let t in s)!u(s,t)||t in this.entries||(e.value[t]=s[t])}else o(this,"type",e,t);return e}}}function S(e,t){return{kind:"schema",type:"nullish",reference:S,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return a(this)},"~run"(e,t){return(null===e.value||void 0===e.value)&&(void 0!==this.default&&(e.value=_(this,e,t)),null===e.value||void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function k(e){return{kind:"schema",type:"number",reference:k,expects:"number",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?o(this,"type",e,t):e.typed=!0,e}}}function E(e,t){return{kind:"schema",type:"optional",reference:E,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return a(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=_(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function x(e,t,s){return{kind:"schema",type:"record",reference:x,expects:"Object",async:!1,key:e,value:t,message:s,get"~standard"(){return a(this)},"~run"(e,t){let s=e.value;if(s&&"object"==typeof s){for(let r in e.typed=!0,e.value={},s)if(u(s,r)){let n=s[r],i=this.key["~run"]({value:r},t);if(i.issues){let o={type:"object",origin:"key",input:s,key:r,value:n};for(let t of i.issues)t.path=[o],e.issues?.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}let o=this.value["~run"]({value:n},t);if(o.issues){let i={type:"object",origin:"value",input:s,key:r,value:n};for(let t of o.issues)t.path?t.path.unshift(i):t.path=[i],e.issues?.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}i.typed&&o.typed||(e.typed=!1),i.typed&&(e.value[i.value]=o.value)}}else o(this,"type",e,t);return e}}}function I(e){return{kind:"schema",type:"string",reference:I,expects:"string",async:!1,message:e,get"~standard"(){return a(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:o(this,"type",e,t),e}}}function A(e){let t;if(e)for(let s of e)t?t.push(...s.issues):t=s.issues;return t}function T(e,t){let s;return{kind:"schema",type:"union",reference:T,expects:(s=[...new Set(e.map(e=>e.expects))]).length>1?`(${s.join(" | ")})`:s[0]??"never",async:!1,options:e,message:t,get"~standard"(){return a(this)},"~run"(e,t){let s,r,n;for(let i of this.options){let o=i["~run"]({value:e.value},t);if(o.typed)if(o.issues)r?r.push(o):r=[o];else{s=o;break}else n?n.push(o):n=[o]}if(s)return s;if(r){if(1===r.length)return r[0];o(this,"type",e,t,{issues:A(r)}),e.typed=!0}else{if(n?.length===1)return n[0];o(this,"type",e,t,{issues:A(n)})}return e}}}function q(){return{kind:"schema",type:"unknown",reference:q,expects:"unknown",async:!1,get"~standard"(){return a(this)},"~run":e=>(e.typed=!0,e)}}function P(e,t,s){let r=e["~run"]({value:t},i(s));if(r.issues)throw new p(r.issues);return r.value}function R(...e){return{...e[0],pipe:e,get"~standard"(){return a(this)},"~run"(t,s){for(let r of e)if("metadata"!==r.kind){if(t.issues&&("schema"===r.kind||"transformation"===r.kind)){t.typed=!1;break}t.issues&&(s.abortEarly||s.abortPipeEarly)||(t=r["~run"](t,s))}return t}}}function M(e,t,s){let r=e["~run"]({value:t},i(s));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}e.s(["any",()=>b,"array",()=>g,"boolean",()=>v,"check",()=>h,"date",()=>y,"function",()=>w,"instance",()=>C,"integer",()=>d,"is",()=>m,"looseObject",()=>F,"nullish",()=>S,"number",()=>k,"optional",()=>E,"parse",()=>P,"pipe",()=>R,"record",()=>x,"safeParse",()=>M,"string",()=>I,"transform",()=>f,"union",()=>T,"unknown",()=>q],44460);var B=Object.defineProperty,V=(e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?B(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s},L=Object.defineProperty,j=(e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?L(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s};function O(e){return t=>t instanceof e}function $(e,t){let s=class extends Error{constructor(...s){super(..."function"==typeof t?t(...s):"string"==typeof t?[t]:t||[]),this.name=e}};return j(s,"is",O(s)),Object.defineProperty(s,"name",{value:e}),s}function U(e,t,s){let r=class extends $(e,s){constructor(...e){super(...e),j(this,"data"),this.data=t(...e)}};return j(r,"is",O(r)),Object.defineProperty(r,"name",{value:e}),r}class D extends $("CancelledError","Promise was canceled"){}class G extends U("TimeoutError",e=>({timeout:e}),(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]){}let W=Symbol("resolved");function N(e,t){return e.reject=t.reject,e.resolve=t.resolve,e}class K extends Promise{constructor(e,t){let s,r,n,i,o,a;"function"==typeof e?(n=e,i=t||{}):i=e||{};let u={};const l=[],c=()=>{l.forEach(e=>e()),l.splice(0,l.length),u={}},p=new AbortController;super((e,t)=>{let{abortOnResolve:h=!0,abortOnReject:d=!0}=i;r=t=>{var s,r;o||a||(e(t),o=[t],null==(s=u.resolved)||s.forEach(e=>e(t)),null==(r=u.finalized)||r.forEach(e=>e({kind:"resolved",result:t})),c(),h&&p.abort({tag:W,value:t}))},s=e=>{var s,r;o||a||(t(e),a=[e],null==(s=u.rejected)||s.forEach(t=>t(e)),null==(r=u.finalized)||r.forEach(t=>t({kind:"rejected",reason:e})),c(),d&&p.abort(e))};let{abortSignal:f}=i;if(f){if(f.aborted)return s(f.reason);let e=()=>{s(f.reason)};f.addEventListener("abort",e,!0),l.push(()=>{f.removeEventListener("abort",e,!0)})}let{timeout:_}=i;if(_){let e=setTimeout(()=>{s(new G(_))},_);l.push(()=>{clearTimeout(e)})}try{let e=()=>{},t=n&&n(r,s,{abortSignal:p.signal,get isRejected(){return!!a},get isResolved(){return!!o},on(t,s){if(o||a){if("finalized"===t){let e=o?{kind:"resolved",result:o[0]}:{kind:"rejected",reason:a[0]};s(e)}else"resolved"===t&&o?s(o[0]):"rejected"===t&&a&&s(a[0]);return e}return u[t]||(u[t]=[]),u[t].push(s),()=>{let e=u[t]||[],r=e.indexOf(s);r>=0&&e.splice(r,1)}},get result(){return null==o?void 0:o[0]},get rejectReason(){return null==a?void 0:a[0]},throwIfRejected(){if(a)throw a[0]}});t instanceof Promise&&t.catch(s)}catch(e){s(e)}}),V(this,"reject"),V(this,"resolve"),this.reject=s,this.resolve=r}static fn(e,t){return new K(async(t,s,r)=>{try{t(await e(r))}catch(e){s(e)}},t)}static resolve(e){return this.fn(()=>e)}static reject(e){return new K((t,s)=>{s(e)})}cancel(){this.reject(new D)}catch(e){return this.then(void 0,e)}finally(e){return N(super.finally(e),this)}then(e,t){return N(super.then(e,t),this)}}function z(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function H(e){return e.replace(/_([a-z])/g,(e,t)=>`-${t.toLowerCase()}`)}function J(e){return`tapps/${e}`}function Q(e,t){sessionStorage.setItem(J(e),JSON.stringify(t))}function Z(e){let t=sessionStorage.getItem(J(e));try{return t?JSON.parse(t):void 0}catch{}}function Y(...e){let t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(e=>{e()})}]}function X(e,t){t||(t={});let{textColor:s,bgColor:r,shouldLog:n}=t,i=void 0===n||n,o="boolean"==typeof i?()=>i:i,a=(t,n,...i)=>{if(n||o()){let n="font-weight:bold;padding:0 5px;border-radius:100px",[o,a,u]={log:["#0089c3","white","INFO"],error:["#ff0000F0","white","ERR"],warn:["#D38E15","white","WARN"]}[t];console[t](`%c${u} ${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c %c${e}`,`${n};background-color:${o};color:${a}`,"",`${n};${s?`color:${s};`:""}${r?`background-color:${r}`:""}`,...i)}};return[["log","forceLog"],["warn","forceWarn"],["error","forceError"]].reduce((e,[t,s])=>(e[t]=a.bind(void 0,t,!1),e[s]=a.bind(void 0,t,!0),e),{})}e.s(["BetterPromise",()=>K,"CancelledError",()=>D,"TimeoutError",()=>G],67900);var ee=function(e,t,s){if(s||2==arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function et(e,t,s,r,n,i,o,a,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return r(s(t(e.apply(this,arguments))))};case 5:return function(){return n(r(s(t(e.apply(this,arguments)))))};case 6:return function(){return i(n(r(s(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(n(r(s(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(i(n(r(s(t(e.apply(this,arguments))))))))};case 9:return function(){return u(a(o(i(n(r(s(t(e.apply(this,arguments)))))))))}}}function es(e,t,s,r,n,i,o,a,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return r(s(t(e)));case 5:return n(r(s(t(e))));case 6:return i(n(r(s(t(e)))));case 7:return o(i(n(r(s(t(e))))));case 8:return a(o(i(n(r(s(t(e)))))));case 9:return u(a(o(i(n(r(s(t(e))))))));default:for(var l=arguments[0],c=1;c<arguments.length;c++)l=arguments[c](l);return l}}var er=function(e,t){var s="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return s(arguments)?t.apply(this,e):function(s){return t.apply(void 0,ee([s],e,!1))}}},en=function(e){return{_tag:"Left",left:e}},ei=function(e){return{_tag:"Right",right:e}},eo=function(e){return"Left"===e._tag},ea=function(e,t){return function(s){return eo(s)?e(s.left):t(s.right)}},eu=function(e,t){return es(e,el(t))},el=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},ec=function(e){return function(){return Promise.resolve(e)}},ep=er(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(e){return t(e)()})}}),eh="Task",ed=ec,ef=function(e,t){var s,r,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){var l=[a,u];if(s)throw TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(o=0)),o;)try{if(s=1,r&&(n=2&l[0]?r.return:l[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,l[1])).done)return n;switch(r=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){o.label=l[1];break}if(6===l[0]&&o.label<n[1]){o.label=n[1],n=l;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(l);break}n[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{s=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},e_=et(en,ed),em=et(ei,ed),eb=(l={URI:eh,map:eu},function(e,t){return function(s){return l.map(s,ea(e,t))}}),eg=er(2,(c={URI:eh,map:eu,of:ec,ap:function(e,t){var s;return es(e,(s=t,function(e){return function(){return Promise.all([Promise.resolve().then(e),Promise.resolve().then(s)]).then(function(e){return(0,e[0])(e[1])})}}))},chain:ep},function(e,t){return c.chain(e,function(e){return eo(e)?c.of(e):t(e.right)})}));function ev(e){let t=e=>{throw e};return"function"==typeof e?K.resolve(es(e,eb(t,e=>e))()):es(e,ea(t,e=>e))}function ey(e){return Object.assign((...t)=>ev(e(...t)),e)}let ew=Object.assign((e,t)=>{var s,r;return es((s=()=>new K((t,s,r)=>e(e=>t(ei(e)),e=>t(en(e)),r),t),r=e=>e,function(){var e,t,n,i;return e=void 0,t=void 0,n=void 0,i=function(){return ef(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,s().then(ei)];case 1:return[2,e.sent()];case 2:return[2,en(r(e.sent()))];case 3:return[2]}})},new(n||(n=Promise))(function(s,r){function o(e){try{u(i.next(e))}catch(e){r(e)}}function a(e){try{u(i.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?s(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((i=i.apply(e,t||[])).next())})}),eg(ea(e_,em)))},{fn:(e,t)=>ew((t,s,r)=>{let n=e(r);es("function"==typeof n?n:ec(n),eb(s,t))()},t)});e.s(["BetterTaskEither",()=>ew,"camelToKebab",()=>z,"createCbCollector",()=>Y,"createLogger",()=>X,"deepSnakeToCamelObjKeys",()=>function e(t){let s=Object.entries(t).reduce((e,[t,s])=>(e[t.replace(/_[a-z]/g,e=>e[1].toUpperCase())]=s,e),{});for(let t in s){let r=s[t];!r||"object"!=typeof r||r instanceof Date||(s[t]=Array.isArray(r)?r.map(e):e(r))}return s},"getStorageValue",()=>Z,"setStorageValue",()=>Q,"snakeToKebab",()=>H,"throwifyAnyEither",()=>ev,"throwifyFpFn",()=>ey],68896);var eC=Object.defineProperty,eF=(e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?eC(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s};function eS(e){return t=>t instanceof e}function ek(e,t){let s=class extends Error{constructor(...s){super(..."function"==typeof t?t(...s):"string"==typeof t?[t]:t||[]),this.name=e}};return eF(s,"is",eS(s)),Object.defineProperty(s,"name",{value:e}),s}function eE(e,t,s){let r=class extends ek(e,s){constructor(...e){super(...e),eF(this,"data"),this.data=t(...e)}};return eF(r,"is",eS(r)),Object.defineProperty(r,"name",{value:e}),r}e.s(["errorClass",()=>ek,"errorClassWithData",()=>eE],62368);var ex=function(e){return{_tag:"Left",left:e}},eI=function(e){return{_tag:"Right",right:e}},eA=function(e,t){try{return eI(e())}catch(e){return ex(t(e))}};function eT(e){return R(I(),R(I(),h(e=>{try{return JSON.parse(e),!0}catch{return!1}},"Input is not a valid JSON value"),f(JSON.parse),e))}function eq(e){let t;return R(T([I(),C(URLSearchParams)]),(t=t=>{let s={};return new URLSearchParams(t).forEach((e,t)=>{let r=s[t];Array.isArray(r)?r.push(e):void 0===r?s[t]=e:s[t]=[r,e]}),P(e,s)},R(T([I(),C(URLSearchParams)]),h(e=>{try{return t(e),!0}catch{return!1}},"The value doesn't match required schema"),f(t))))}function eP(e){return t=>e.test(t)}let eR=eP(/^#[\da-f]{3}$/i),eM=eP(/^#[\da-f]{4}$/i),eB=eP(/^#[\da-f]{6}$/i),eV=eP(/^#[\da-f]{8}$/i);function eL(e){return[eB,eV,eR,eM].some(t=>t(e))}function ej(e){let t="#";for(let s=0;s<e.length-1;s+=1)t+=e[1+s].repeat(2);return t}function eO(e){let t=e.replace(/\s/g,"").toLowerCase();if(/^#[\da-f]{3}$/i.test(t))return eI(ej(t.toLowerCase()+"f"));if(/^#[\da-f]{4}$/i.test(t))return eI(ej(t.toLowerCase()));if(/^#[\da-f]{6}$/i.test(t))return eI(t.toLowerCase()+"ff");if(/^#[\da-f]{8}$/i.test(t))return eI(t.toLowerCase());let s=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(\d{1,3})\)$/);return s?eI(s.slice(1).reduce((e,t)=>e+parseInt(t,10).toString(16).padStart(2,"0"),"#").padEnd(9,"f")):ex(Error(`Value "${e}" does not satisfy any of known RGB formats.`))}function e$(e){var t;return function(e,t,s,r,n,i,o,a,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return r(s(t(e)));case 5:return n(r(s(t(e))));case 6:return i(n(r(s(t(e)))));case 7:return o(i(n(r(s(t(e))))));case 8:return a(o(i(n(r(s(t(e)))))));case 9:return u(a(o(i(n(r(s(t(e))))))));default:for(var l=arguments[0],c=1;c<arguments.length;c++)l=arguments[c](l);return l}}(eO(e),(t=e=>e.slice(0,7),function(e){return"Left"===e._tag?e:eI(t(e.right))}))}let eU=ey(e$),eD=ey(eO);function eG(){return F({added_to_attachment_menu:E(v()),allows_write_to_pm:E(v()),first_name:I(),id:k(),is_bot:E(v()),is_premium:E(v()),last_name:E(I()),language_code:E(I()),photo_url:E(I()),username:E(I())})}function eW(){return eq(F({auth_date:R(I(),f(e=>new Date(1e3*Number(e))),y()),can_send_after:E(R(I(),f(Number),d())),chat:E(eT(F({id:k(),photo_url:E(I()),type:I(),title:I(),username:E(I())}))),chat_type:E(I()),chat_instance:E(I()),hash:I(),query_id:E(I()),receiver:E(eT(eG())),start_param:E(I()),signature:I(),user:E(eT(eG()))}))}function eN(){return x(I(),R(T([I(),k()]),f(e=>"number"==typeof e?`#${(0xffffff&e).toString(16).padStart(6,"0")}`:e),h(eL)))}function eK(){return F({eventType:I(),eventData:E(q())})}function ez(e){return eA(()=>P(eW(),e),e=>e)}function eH(e){return eA(()=>{let t;return P(eq(F({tgWebAppBotInline:t=E(R(I(),f(e=>"1"===e))),tgWebAppData:E(eW()),tgWebAppDefaultColors:E(eT(eN())),tgWebAppFullscreen:t,tgWebAppPlatform:I(),tgWebAppShowSettings:t,tgWebAppStartParam:E(I()),tgWebAppThemeParams:eT(eN()),tgWebAppVersion:I()})),e)},e=>e)}let eJ=ey(ez),eQ=ey(eH);function eZ(e,t){return t||(t=(e,t)=>JSON.stringify(t)),new URLSearchParams(Object.entries(e).reduce((e,[s,r])=>(Array.isArray(r)?e.push(...r.map(e=>[s,String(e)])):null!=r&&e.push([s,r instanceof Date?(r.getTime()/1e3|0).toString():"string"==typeof r||"number"==typeof r?String(r):"boolean"==typeof r?r?"1":"0":t(s,r)]),e),[])).toString()}function eY(e){return eZ(e)}function eX(e){return eZ(e,(e,t)=>"tgWebAppData"===e?eZ(t):JSON.stringify(t))}e.s(["isAnyRGB",()=>eL,"isRGB",()=>eB,"isRGBA",()=>eV,"isRGBAShort",()=>eM,"isRGBShort",()=>eR,"miniAppsMessage",()=>eK,"parseInitDataQuery",()=>eJ,"parseInitDataQueryFp",()=>ez,"parseLaunchParamsQuery",()=>eQ,"parseLaunchParamsQueryFp",()=>eH,"pipeJsonToSchema",()=>eT,"pipeQueryToSchema",()=>eq,"serializeInitDataQuery",()=>eY,"serializeLaunchParamsQuery",()=>eX,"themeParams",()=>eN,"toRGB",()=>eU,"toRGBFp",()=>e$,"toRGBFull",()=>eD,"toRGBFullFp",()=>eO],59547)},57678,e=>{"use strict";let t;function s(e){if(t)return e();t=new Map;try{e()}finally{t.forEach(e=>e()),t=void 0}}function r(e,s){s||(s={});let r=s.equals||Object.is,i=[],o=e,a=e=>{if(!r(o,e)){var s;let r=o;o=e,s=()=>{[...i].forEach(([t,s])=>{t(e,r),s&&l(t,!0)})},t?t.set(c,s):s()}};function u(e){let t="object"!=typeof e?{once:e}:e;return{once:t.once||!1,signal:t.signal||!1}}let l=(e,t)=>{let s=u(t),r=i.findIndex(([t,r])=>t===e&&r.once===s.once&&r.signal===s.signal);r>=0&&i.splice(r,1)},c=Object.assign(function(){var e;return e=c,n.length&&n[n.length-1].add(e),o},{destroy(){i=[]},set:a,reset(){a(e)},sub:(e,t)=>(i.push([e,u(t)]),()=>l(e,t)),unsub:l,unsubAll(){i=i.filter(e=>e[1].signal)}});return c}let n=[];function i(e,t){let s=new Set,i;function o(){return i||(i=r(u(),t))}function a(){o().set(u())}function u(){let t;s.forEach(e=>{e.unsub(a,{signal:!0})});let r=new Set;n.push(r);try{t=e()}finally{n.pop()}return r.forEach(e=>{e.sub(a,{signal:!0})}),s=r,t}return Object.assign(function(){return o()()},{destroy(){o().destroy()},sub:(...e)=>o().sub(...e),unsub(...e){o().unsub(...e)},unsubAll(...e){o().unsubAll(...e)}})}e.s(["batch",()=>s,"computed",()=>i,"signal",()=>r])},35205,62029,e=>{"use strict";let t,s,r,n,i,o,a,u;var l,c,p,h,d,f,_,m,b,g,v,y=e.i(57678),w=e.i(44460),C=e.i(68896),F=e.i(67900),S=e.i(62368),k=e.i(59547);function E(e){return(0,w.is)((0,w.looseObject)({TelegramWebviewProxy:(0,w.looseObject)({postEvent:(0,w.function)()})}),e)}function x(){try{return window.self!==window.top}catch{return!0}}var I=function(e,t,s){if(s||2==arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function A(e){return e}function T(e,t,s,r,n,i,o,a,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return r(s(t(e.apply(this,arguments))))};case 5:return function(){return n(r(s(t(e.apply(this,arguments)))))};case 6:return function(){return i(n(r(s(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(n(r(s(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(i(n(r(s(t(e.apply(this,arguments))))))))};case 9:return function(){return u(a(o(i(n(r(s(t(e.apply(this,arguments)))))))))}}}function q(e,t,s,r,n,i,o,a,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return r(s(t(e)));case 5:return n(r(s(t(e))));case 6:return i(n(r(s(t(e)))));case 7:return o(i(n(r(s(t(e))))));case 8:return a(o(i(n(r(s(t(e)))))));case 9:return u(a(o(i(n(r(s(t(e))))))));default:for(var l=arguments[0],c=1;c<arguments.length;c++)l=arguments[c](l);return l}}var P=function(e,t){var s="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return s(arguments)?t.apply(this,e):function(s){return t.apply(void 0,I([s],e,!1))}}},R=function(e){return{_tag:"Left",left:e}},M=function(e){return{_tag:"Right",right:e}},B=P(2,function(e,t){return V(e)?e:t(e.right)}),V=function(e){return"Left"===e._tag},L=function(e,t){return function(s){return V(s)?e(s.left):t(s.right)}},j=function(e,t){try{return M(e())}catch(e){return R(t(e))}},O={_tag:"None"},$=function(e,t){return q(e,U(t))},U=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},D=function(e){return function(){return Promise.resolve(e)}},G=P(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(e){return t(e)()})}}),W="Task",N={URI:W,map:$},K=D,z=T(R,K),H=T(M,K),J=function(e,t){return function(s){return N.map(s,L(e,t))}},Q=P(3,function(e,t,s){return N.map(e,function(e){return V(e)?R(t(e.left)):M(s(e.right))})}),Z=P(2,(l={URI:W,map:$,of:D,ap:function(e,t){var s;return q(e,(s=t,function(e){return function(){return Promise.all([Promise.resolve().then(e),Promise.resolve().then(s)]).then(function(e){return(0,e[0])(e[1])})}}))},chain:G},function(e,t){return l.chain(e,function(e){return V(e)?l.of(e):t(e.right)})}));class Y extends(0,S.errorClass)("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]){}class X extends(0,S.errorClass)("MethodParameterUnsupportedError",(e,t,s)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${s}`]){}class ee extends(0,S.errorClassWithData)("LaunchParamsRetrieveError",e=>({errors:e}),e=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","ðŸ“– Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/tma-js-bridge/environment","","Collected errors:",...e.map(({source:e,error:t})=>`Source: ${e} / ${t instanceof Error?t.message:String(t)}`)].join(`
`)]){}class et extends(0,S.errorClass)("InvalidLaunchParamsError",(e,t)=>[`Invalid value for launch params: ${e}`,{cause:t}]){}class es extends(0,S.errorClass)("UnknownEnvError"){}class er extends(0,S.errorClass)("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]){}let en="launchParams";function ei(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}let eo=T(ec,B(k.parseLaunchParamsQueryFp)),ea=(0,C.throwifyFpFn)(eo),eu=T(ec,(c=e=>{let t=new URLSearchParams(e).get("tgWebAppData");return t?{_tag:"Some",value:t}:O},function(e){return V(e)?e:M(c(e.right))})),el=T(eu,L(e=>{throw e},e=>e),(p=()=>{},h=e=>e,function(e){return"None"===e._tag?p():h(e.value)}));function ec(){let e=[];for(let[t,s]of[[()=>ei(window.location.href),"window.location.href"],[()=>{let e=performance.getEntriesByType("navigation")[0];return e&&ei(e.name)},"performance navigation entries"],[()=>(0,C.getStorageValue)(en),"local storage"]]){let r=t();if(!r){e.push({source:s,error:Error("Source is empty")});continue}let n=q((0,k.parseLaunchParamsQueryFp)(r),L(e=>e,()=>!0));if("boolean"!=typeof n){e.push({source:s,error:n});continue}return(0,C.setStorageValue)(en,r),M(r)}return R(new ee(e))}let ep=(0,C.throwifyFpFn)(ec);function eh(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let ed=(0,y.signal)(!1),ef=(0,y.signal)("https://web.telegram.org"),e_=e=>{ew().log("Event received:",e)},em=(0,y.computed)(ed);function eb(e){e!==ed()&&(ed.set(e),(e?eI:eA)("*",e_))}let eg=(0,y.computed)(ef);function ev(e){ef.set(e),ew().log("New target origin set",e)}let ey=(0,y.signal)((...e)=>{window.parent.postMessage(...e)}),ew=(0,y.signal)((0,C.createLogger)("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:em}));function eC(e,t,s){let r=[s],n=e[t];"function"==typeof n&&r.push(n);let i=(...e)=>{r.forEach(t=>t(...e))},o=Object.assign((...e)=>{i(...e)},{unwrap(){let{length:s}=r;1===s?delete e[t]:2===s?ek(e,t,r[1]):(r.unshift(1),ek(e,t,i))}});eS(e,t,()=>o,e=>r.push(e))}function eF(e,t){let s=e[t];eS(e,t,()=>s,e=>{Object.entries(e).forEach(([e,t])=>{s[e]=t})})}function eS(e,t,s,r){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:s,set:r})}function ek(e,t,s){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s})}let eE={clipboard_text_received:(0,w.looseObject)({req_id:(0,w.string)(),data:(0,w.nullish)((0,w.string)())}),custom_method_invoked:(0,w.looseObject)({req_id:(0,w.string)(),result:(0,w.optional)((0,w.unknown)()),error:(0,w.optional)((0,w.string)())}),popup_closed:(0,w.nullish)((0,w.looseObject)({button_id:(0,w.nullish)((0,w.string)(),()=>{})}),{}),viewport_changed:(0,w.nullish)((0,w.looseObject)({height:(0,w.number)(),width:(0,w.nullish)((0,w.number)(),()=>window.innerWidth),is_state_stable:(0,w.boolean)(),is_expanded:(0,w.boolean)()}),()=>({height:window.innerHeight,is_state_stable:!0,is_expanded:!0})),theme_changed:(0,w.looseObject)({theme_params:(0,k.themeParams)()})};function ex(e){let t,s;if(e.source!==window.parent)return;try{t=(0,w.parse)((0,k.pipeJsonToSchema)((0,k.miniAppsMessage)()),e.data)}catch{return}let{eventType:r,eventData:n}=t,i=eE[r];try{s=i?(0,w.parse)(i,n):n}catch(e){return ew().forceError([`An error occurred processing the "${r}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose"].join(`
`),t,e)}eT(r,s)}let{on:eI,off:eA,emit:eT,clear:eq}=(d=()=>{let e=window;e.TelegramGameProxy||(e.TelegramGameProxy={}),eC(e.TelegramGameProxy,"receiveEvent",eh),eF(e,"TelegramGameProxy"),e.Telegram||(e.Telegram={}),e.Telegram.WebView||(e.Telegram.WebView={}),eC(e.Telegram.WebView,"receiveEvent",eh),eF(e.Telegram,"WebView"),eC(e,"TelegramGameProxy_receiveEvent",eh),window.addEventListener("message",ex)},f=()=>{[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{let t=window,s=[void 0,t];for(let t of e)if(!(s=[s[1],s[1][t]])[1])return;let[r,n]=s;"unwrap"in n&&(n.unwrap(),r&&r!==t&&!Object.keys(r).length&&delete t[e[0]])}),window.removeEventListener("message",ex)},t=new Map,s={all:_=_||new Map,on:function(e,t){var s=_.get(e);s?s.push(t):_.set(e,[t])},off:function(e,t){var s=_.get(e);s&&(t?s.splice(s.indexOf(t)>>>0,1):_.set(e,[]))},emit:function(e,t){var s=_.get(e);s&&s.slice().map(function(e){e(t)}),(s=_.get("*"))&&s.slice().map(function(s){s(e,t)})}},{on(e,n,i){t.size||d();let o=()=>{r(e,n,i)},a=(...t)=>{i&&o(),"*"===e?n({name:t[0],payload:t[1]}):n(...t)};s.on(e,a);let u=t.get(e)||new Map;t.set(e,u);let l=u.get(n)||[];return u.set(n,l),l.push([a,i||!1]),o},off:r=(e,r,n=!1)=>{let i=t.get(e)||new Map;t.set(e,i);let o=i.get(r)||[];i.set(r,o);let a=o.findIndex(e=>e[1]===n);if(a>=0&&(s.off(e,o[a][0]),o.splice(a,1),!o.length&&(i.delete(r),!i.size))){let s=t.size;t.delete(e),s&&!t.size&&f()}},emit:s.emit,clear(){let e=t.size;s.all.clear(),t.clear(),e&&f()}});function eP(e,t){ew().log("Posting event:",t?{eventType:e,eventData:t}:{eventType:e});let s=window,r=JSON.stringify({eventType:e,eventData:t});return x()?(((...e)=>ey()(...e))(r,eg()),M(void 0)):E(s)?(s.TelegramWebviewProxy.postEvent(e,JSON.stringify(t)),M(void 0)):(0,w.is)((0,w.looseObject)({external:(0,w.looseObject)({notify:(0,w.function)()})}),s)?(s.external.notify(r),M(void 0)):R(new es)}function eR(e,t,s={}){let{capture:r=()=>!0,postEvent:n=eP}=s,i=(0,y.signal)(),[o,a]=(0,C.createCbCollector)();(Array.isArray(t)?t:[t]).forEach(e=>{o(eI(e,s=>{let n=Array.isArray(t);r(n?{event:e,payload:s}:s)&&i.set([n?{event:e,payload:s}:s])}))});let u=e=>(a(),e);return q(async()=>n(e,s.params),Z(()=>(0,C.BetterTaskEither)((e,t,s)=>{let r=i();if(r)return e(r[0]);let n=t=>{t&&e(t[0])};i.sub(n),s.on("finalized",()=>{i.unsub(n)})},s)),Q(u,u))}function eM(e,t){let s=eB(e,t);return"function"==typeof s?F.BetterPromise.fn(()=>(0,C.throwifyAnyEither)(s)):s}function eB(e,t){let s=E(window);if(!e)return s||q(ec(),L(()=>!1,()=>!0));if(s)return H(!0);let{timeout:r=100}=t||{};return q(eR("web_app_request_theme","theme_changed",{...t,timeout:r}),J(e=>F.TimeoutError.is(e)||es.is(e)?M(!1):R(e),()=>M(!0)))}function eV({launchParams:e,onEvent:t,resetPostMessage:s}={}){if(e){let t="string"==typeof e||e instanceof URLSearchParams?e.toString():(0,k.serializeLaunchParamsQuery)({...e,tgWebAppData:void 0})+(e.tgWebAppData?`&tgWebAppData=${encodeURIComponent(e.tgWebAppData.toString())}`:"");try{(0,k.parseLaunchParamsQuery)(t)}catch(e){throw new et(t,e)}(0,C.setStorageValue)("launchParams",t)}if(x()){if(!t)return;s&&ey.reset();let e=ey();ey.set((...s)=>{let[r]=s,n=()=>{e(...s)};try{let e=(0,w.parse)((0,k.pipeJsonToSchema)((0,k.miniAppsMessage)()),r);t({name:e.eventType,params:e.eventData},n)}catch{n()}});return}let r=window.TelegramWebviewProxy||{},n=r.postEvent||(()=>{});window.TelegramWebviewProxy={...r,postEvent(e,s){let r=()=>{n(e,s)};t?t({name:e,params:s?JSON.parse(s):void 0},r):r()}},ew().log("Environment was mocked by the mockTelegramEnv function")}function eL(e){return({req_id:t})=>t===e}let ej={"6.0":["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"],6.1:["web_app_open_tg_link","web_app_open_invoice","web_app_setup_back_button","web_app_set_background_color","web_app_set_header_color","web_app_trigger_haptic_feedback"],6.2:["web_app_open_popup"],6.4:["web_app_close_scan_qr_popup","web_app_open_scan_qr_popup","web_app_read_text_from_clipboard",{method:"web_app_open_link",param:"try_instant_view"}],6.7:["web_app_switch_inline_query"],6.9:["web_app_invoke_custom_method","web_app_request_write_access","web_app_request_phone",{method:"web_app_set_header_color",param:"color"}],"6.10":["web_app_setup_settings_button"],7.2:["web_app_biometry_get_info","web_app_biometry_open_settings","web_app_biometry_request_access","web_app_biometry_request_auth","web_app_biometry_update_token"],7.6:[{method:"web_app_open_link",param:"try_browser"},{method:"web_app_close",param:"return_back"}],7.7:["web_app_setup_swipe_behavior"],7.8:["web_app_share_to_story"],"7.10":["web_app_setup_secondary_button","web_app_set_bottom_bar_color",{method:"web_app_setup_main_button",param:"has_shine_effect"}],"8.0":["web_app_request_safe_area","web_app_request_content_safe_area","web_app_request_fullscreen","web_app_exit_fullscreen","web_app_set_emoji_status","web_app_add_to_home_screen","web_app_check_home_screen","web_app_request_emoji_status_access","web_app_check_location","web_app_open_location_settings","web_app_request_file_download","web_app_request_location","web_app_send_prepared_message","web_app_start_accelerometer","web_app_start_device_orientation","web_app_start_gyroscope","web_app_stop_accelerometer","web_app_stop_device_orientation","web_app_stop_gyroscope","web_app_toggle_orientation_lock"],"9.0":["web_app_device_storage_clear","web_app_device_storage_get_key","web_app_device_storage_save_key","web_app_secure_storage_clear","web_app_secure_storage_get_key","web_app_secure_storage_restore_key","web_app_secure_storage_save_key"],9.1:["web_app_hide_keyboard"]};function eO(e,t){return Object.keys(ej).find(s=>ej[s].some(s=>t?"object"==typeof s&&s.method===e&&s.param===t:s===e))||null}function e$(e){return e.split(".").map(Number)}function eU(e,t,s){let r=s?eO(e,t):eO(e);return!!r&&0>=function(e,t){let s=e$(e),r=e$(t),n=Math.max(s.length,r.length);for(let e=0;e<n;e+=1){let t=s[e]||0,n=r[e]||0;if(t!==n)return t>n?1:-1}return 0}(r,s||t)}function eD(e,t="strict"){let s="function"==typeof t?t:e=>{let{method:s,version:r}=e,n="param"in e?new X(s,e.param,r):new Y(s,r);if("strict"===t)throw n;return ew().forceWarn(n.message)};return(t,r)=>{var n;return eU(t,e)?"web_app_set_header_color"===t&&(0,w.is)((0,w.looseObject)({color:(0,w.any)()}),r)&&!eU(t,"color",e)?s({version:e,method:t,param:"color"}):void q(eP(t,r),(n=e=>{throw e},function(e){return V(e)?R(n(e.left)):e})):s({version:e,method:t})}}function eG(e,t,s,r){return q(eR("web_app_invoke_custom_method","custom_method_invoked",{...r||{},params:{method:e,params:t,req_id:s},capture:eL(s)}),Z(({result:e,error:t})=>t?z(new er(t)):H(e)))}function eW(e,t,s={}){let{capture:r=()=>!0,postEvent:n=eP}=s,i=(0,y.signal)(),[o,a]=(0,C.createCbCollector)();(Array.isArray(t)?t:[t]).forEach(e=>{o(eI(e,s=>{(Array.isArray(t)?r({event:e,payload:s}):r(s))&&i.set([s])}))});let u=e=>(a(),e);return q(async()=>n(e,s.params),Z(()=>(0,C.BetterTaskEither)((e,t,s)=>{let r=i();if(r)return e(r[0]);let n=t=>{t&&e(t[0])};i.sub(n),s.on("finalized",()=>{i.unsub(n)})},s)),Q(u,u))}function eN(){Object.hasOwn||(Object.hasOwn=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)})}function eK(e){return j(()=>decodeURIComponent(atob(e.replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),e=>e)}let ez=(0,C.throwifyFpFn)(eK);function eH(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt(`0x${t}`)))).replace(/\+/g,"-").replace(/\//g,"_")}function eJ(e){let t=eH("string"==typeof e?e:JSON.stringify(e));return t.length>512?R(Error("Value is too long for start parameter")):M(t)}let eQ=(0,C.throwifyFpFn)(eJ);function eZ(e,t){return(0,C.throwifyAnyEither)(eY(e,"function"==typeof t?e=>j(()=>t(e),e=>e):t))}function eY(e,t){return q(eK(e),B(e=>t?"function"==typeof t?t(e):j(function(){return JSON.parse(e)},A):M(e)))}function eX(e){return eH(e).length<=512}e.s(["InvalidLaunchParamsError",()=>et,"InvokeCustomMethodFailedError",()=>er,"LaunchParamsRetrieveError",()=>ee,"MethodParameterUnsupportedError",()=>X,"MethodUnsupportedError",()=>Y,"UnknownEnvError",()=>es,"applyPolyfills",()=>eN,"captureSameReq",()=>eL,"createPostEvent",()=>eD,"createStartParam",()=>eQ,"createStartParamFp",()=>eJ,"debug",()=>em,"decodeBase64Url",()=>ez,"decodeBase64UrlFp",()=>eK,"decodeStartParam",()=>eZ,"decodeStartParamFp",()=>eY,"emitEvent",()=>eh,"encodeBase64Url",()=>eH,"getReleaseVersion",()=>eO,"invokeCustomMethodFp",()=>eG,"isSafeToCreateStartParam",()=>eX,"isTMA",()=>eM,"isTMAFp",()=>eB,"logger",()=>ew,"mockTelegramEnv",()=>eV,"off",()=>eA,"offAll",()=>eq,"on",()=>eI,"postEventFp",()=>eP,"request2Fp",()=>eR,"requestFp",()=>eW,"retrieveLaunchParams",()=>ea,"retrieveLaunchParamsFp",()=>eo,"retrieveRawInitData",()=>el,"retrieveRawInitDataFp",()=>eu,"retrieveRawLaunchParams",()=>ep,"retrieveRawLaunchParamsFp",()=>ec,"setDebug",()=>eb,"setTargetOrigin",()=>ev,"supports",()=>eU,"targetOrigin",()=>eg],62029);var e0=S,e1=Object.defineProperty,e2=(e,t,s)=>{let r;return(r="symbol"!=typeof t?t+"":t)in e?e1(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s},e6=function(e,t,s){if(s||2==arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))};function e3(e,t,s,r,n,i,o,a,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return s(t(e.apply(this,arguments)))};case 4:return function(){return r(s(t(e.apply(this,arguments))))};case 5:return function(){return n(r(s(t(e.apply(this,arguments)))))};case 6:return function(){return i(n(r(s(t(e.apply(this,arguments))))))};case 7:return function(){return o(i(n(r(s(t(e.apply(this,arguments)))))))};case 8:return function(){return a(o(i(n(r(s(t(e.apply(this,arguments))))))))};case 9:return function(){return u(a(o(i(n(r(s(t(e.apply(this,arguments)))))))))}}}function e4(e,t,s,r,n,i,o,a,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return s(t(e));case 4:return r(s(t(e)));case 5:return n(r(s(t(e))));case 6:return i(n(r(s(t(e)))));case 7:return o(i(n(r(s(t(e))))));case 8:return a(o(i(n(r(s(t(e)))))));case 9:return u(a(o(i(n(r(s(t(e))))))));default:for(var l=arguments[0],c=1;c<arguments.length;c++)l=arguments[c](l);return l}}var e5=function(e,t){var s="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return s(arguments)?t.apply(this,e):function(s){return t.apply(void 0,e6([s],e,!1))}}},e9=function(e){return{_tag:"Left",left:e}},e7=function(e){return{_tag:"Right",right:e}},e8={};function te(e){return function(t,s){return function(r){return e.chain(r,function(r){return e.map(s(r),function(e){var s;return Object.assign({},r,((s={})[t]=e,s))})})}}}var tt=e5(2,function(e,t){return ta(e)?e:t(e.right)}),ts=function(e,t){return e4(e,ti(t))},tr=function(e,t){return e4(e,to(t))},tn="Either",ti=function(e){return function(t){return ta(t)?t:e7(e(t.right))}},to=function(e){return function(t){return ta(t)?t:ta(e)?e:e7(t.right(e.right))}},ta=function(e){return"Left"===e._tag},tu=function(e,t){return function(s){return ta(s)?e(s.left):t(s.right)}},tl=function(e,t){try{return e7(e())}catch(e){return e9(t(e))}},tc=e7(e8),tp=te({URI:tn,map:ts,ap:tr,chain:tt});function th(e){return"function"==typeof e?e():e}class td{constructor({onMounted:e,restoreState:t,initialState:s,onUnmounted:r,isPageReload:n}){e2(this,"_isMounted",(0,y.signal)(!1)),e2(this,"isMounted",(0,y.computed)(this._isMounted)),e2(this,"mount"),e2(this,"unmount"),this.mount=()=>{if(this.isMounted())return e7(void 0);let r=th(n)?t():void 0;return e4(r?e7(r):"function"==typeof s?s():e7(s),ti(t=>{(0,y.batch)(()=>{this._isMounted.set(!0),null==e||e(t)})}))},this.unmount=()=>{this._isMounted()&&(0,y.batch)(()=>{this._isMounted.set(!1),null==r||r()})}}}function tf(e){let t={};for(let s in e){let r=e[s];void 0!==r&&(t[s]=r)}return t}function t_(e,t){let s=Object.keys(e),r=Object.keys(t);return s.length===r.length&&s.every(s=>Object.prototype.hasOwnProperty.call(t,s)&&e[s]===t[s])}class tm{constructor({initialState:e,onChange:t}){e2(this,"_state"),e2(this,"state"),e2(this,"setState",e=>{let t={...this.state(),...tf(e)};t_(t,this.state())||this._state.set(t)}),this._state=(0,y.signal)(e,{equals:t_}),this.state=(0,y.computed)(this._state),this.state.sub(t)}getter(e){return(0,y.computed)(()=>this._state()[e])}hasDiff(e){return!t_({...this.state(),...tf(e)},this.state())}}function tb(e,t){return(0,y.computed)(()=>eU(e,th(t)))}var tg={_tag:"None"},tv=function(e){return{_tag:"Some",value:e}},ty=e5(2,function(e,t){return tw(e)?tg:t(e.value)}),tw=function(e){return"None"===e._tag},tC=function(e,t){return function(s){return tw(s)?e():t(s.value)}},tF=tv(e8),tS=te({URI:"Option",map:function(e,t){var s;return e4(e,(s=t,function(e){return tw(e)?tg:tv(s(e.value))}))},ap:function(e,t){var s;return e4(e,(s=t,function(e){return tw(e)||tw(s)?tg:tv(e.value(s.value))}))},chain:ty});function tk(e){return Object.assign((0,C.throwifyFpFn)(e),{ifAvailable:(...t)=>e4(e.ifAvailable(...t),tC(()=>({ok:!1}),e=>({ok:!0,data:(0,C.throwifyAnyEither)(e)})))})}var tE=function(e,t){return e4(e,tI(t))},tx=function(e,t){return e4(e,tA(t))},tI=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},tA=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then(function(e){return(0,e[0])(e[1])})}}},tT=function(e){return function(){return Promise.resolve(e)}},tq=e5(2,function(e,t){return function(){return Promise.resolve().then(e).then(function(e){return t(e)()})}}),tP="Task",tR={URI:tP,map:tE},tM=tT,tB=function(e,t){var s,r,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){var l=[a,u];if(s)throw TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(o=0)),o;)try{if(s=1,r&&(n=2&l[0]?r.return:l[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,l[1])).done)return n;switch(r=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return o.label++,{value:l[1],done:!1};case 5:o.label++,r=l[1],l=[0];continue;case 7:l=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){o=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){o.label=l[1];break}if(6===l[0]&&o.label<n[1]){o.label=n[1],n=l;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(l);break}n[2]&&o.ops.pop(),o.trys.pop();continue}l=t.call(e,o)}catch(e){l=[6,e],r=0}finally{s=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}},tV=e3(e9,tM),tL=e3(e7,tM),tj=function(e,t){return function(s){return tR.map(s,tu(e,t))}},tO=(m={URI:tn,map:ts},function(e){return function(t){return tR.map(t,function(t){return m.map(t,e)})}}),t$=e5(3,function(e,t,s){return tR.map(e,function(e){return ta(e)?e9(t(e.left)):e7(s(e.right))})}),tU=(b={URI:tP,map:tE,ap:tx},g={URI:tn,map:ts,ap:tr},function(e){return function(t){return b.ap(b.map(t,function(e){return function(t){return g.ap(e,t)}}),e)}}),tD=e5(2,(v={URI:tP,map:tE,of:tT,ap:tx,chain:tq},function(e,t){return v.chain(e,function(e){return ta(e)?v.of(e):t(e.right)})})),tG=tL(e8),tW=te({URI:"TaskEither",map:function(e,t){return e4(e,tO(t))},ap:function(e,t){return e4(e,tU(t))},chain:tD});function tN(e){return[e]}class tK extends(0,e0.errorClassWithData)("ValidationError",(e,t)=>({input:e,issues:t}),"Validation error"){}class tz extends(0,e0.errorClass)("CSSVarsBoundError","CSS variables are already bound"){}class tH extends(0,e0.errorClassWithData)("DeviceStorageMethodError",e=>({error:e}),e=>[e]){}class tJ extends(0,e0.errorClassWithData)("SecureStorageMethodError",e=>({error:e}),e=>[e]){}class tQ extends(0,e0.errorClass)("NotAvailableError",tN){}(0,e0.errorClass)("InvalidEnvError",tN);class tZ extends(0,e0.errorClass)("FunctionNotAvailableError",tN){}class tY extends(0,e0.errorClass)("InvalidArgumentsError",(e,t)=>[e,{cause:t}]){}class tX extends(0,e0.errorClass)("ConcurrentCallError",tN){}class t0 extends(0,e0.errorClass)("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]){}class t1 extends(0,e0.errorClass)("AccessDeniedError",tN){}class t2 extends(0,e0.errorClass)("FullscreenFailedError",tN){}class t6 extends(0,e0.errorClass)("ShareMessageError",tN){}class t3 extends(0,e0.errorClass)("UnknownThemeParamsKeyError",e=>[`Unknown theme params key passed: ${e}`]){}function t4(e,t){let s=(0,y.computed)(()=>th(t.version)||"100"),r=(0,y.computed)(()=>th(t.isTma)),{requires:n,returns:i}=t,o=n?"object"==typeof n?n:{every:[n]}:void 0,a=e=>{if(!t.supports)return!0;let r=t.supports[e];return eU(r.method,r.param,s())},u=()=>{if(!o)return;let[e,t]="every"in o?["every",o.every]:["some",o.some];for(let r=0;r<t.length;r++){let n=t[r],i="function"==typeof n?n():eU(n,s())?void 0:`it is unsupported in Mini Apps version ${s()}`;if(i&&("every"===e||r===t.length-1))return i}},l=(0,y.computed)(()=>!u()),c=(0,y.computed)(()=>"0.0"!==s()),p=(0,y.computed)(()=>!t.isMounted||t.isMounted()),h=(0,y.computed)(()=>r()&&c()&&l()&&p()),d=e=>{let s=new tZ(e);return["task","promise"].includes(t.returns)?tV(s):e9(s)},f=(...t)=>{var s,r;return"plain"===i?tl(()=>e(...t),e=>e):"promise"===i?(s=()=>e(...t),r=e=>e,function(){var e,t,n,i;return e=void 0,t=void 0,n=void 0,i=function(){return tB(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,s().then(e7)];case 1:return[2,e.sent()];case 2:return[2,e9(r(e.sent()))];case 3:return[2]}})},new(n||(n=Promise))(function(s,r){function o(e){try{u(i.next(e))}catch(e){r(e)}}function a(e){try{u(i.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?s(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(o,a)}u((i=i.apply(e,t||[])).next())})}):e(...t)};return Object.assign((...e)=>{var n;let i="Unable to call function:";if(!r())return d(`${i} it can't be called outside Mini Apps`);if(!c())return d(`${i} the SDK was not initialized. Use the SDK init() function`);let o=u();if(o)return d(`${i} ${o}`);let l=((...e)=>{for(let r in t.supports)if(t.supports[r].shouldCheck(...e)&&!a(r))return`option ${r} is not supported in Mini Apps version ${s()}`})(...e);if(l)return d(`${i} ${l}`);if(!p()){let e=null!=(n=t.isMounting)&&n.call(t)?"mounting. Wait for the mount completion":"unmounted. Use the mount() method";return d(`${i} the component is ${e}`)}return f(...e)},e,{isAvailable:h,ifAvailable:(...e)=>h()?tv(f(...e)):tg},o?{isSupported:l}:{},t.supports?{supports:a}:{})}function t5(e){return t=>t4(t,e)}class t9{constructor({isTma:e,storage:t,onClick:s,offClick:r,initialState:n,isPageReload:i,postEvent:o,payload:a,method:u,version:l}){e2(this,"isMounted"),e2(this,"isSupported"),e2(this,"state"),e2(this,"stateSetters"),e2(this,"stateBoolSetters"),e2(this,"setStateFp"),e2(this,"setState"),e2(this,"onClickFp"),e2(this,"onClick"),e2(this,"offClickFp"),e2(this,"offClick"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount");const c=new tm({initialState:n,onChange(e){t.set(e)}}),p=new td({initialState:n,isPageReload:i,onMounted:c.setState,restoreState:t.get}),h={version:l,requires:u,isTma:e},d=t5({...h,returns:"plain"}),f=t5({...h,returns:"either",isMounted:p.isMounted});this.isMounted=p.isMounted,this.isSupported=tb(u,l),this.state=c.state,this.setStateFp=f(e=>{let t={...this.state(),...tf(e)};return c.hasDiff(t)?e4(o(u,a(t)),ti(()=>{c.setState(t)})):e7(void 0)}),this.setState=tk(this.setStateFp),this.onClickFp=d(s),this.onClick=tk(this.onClickFp),this.offClickFp=d(r),this.offClick=tk(this.offClickFp),this.mountFp=d(()=>{let e=()=>{};return e4(p.mount(),tu(e,e))}),this.mount=tk(this.mountFp),this.unmount=p.unmount,this.stateSetters=e=>{let t=f(t=>this.setStateFp({[e]:t}));return[tk(t),t]},this.stateBoolSetters=e=>{let[,t]=this.stateSetters(e),s=f(()=>t(!1)),r=f(()=>t(!0));return[[tk(s),s],[tk(r),r]]}}stateGetter(e){return(0,y.computed)(()=>this.state()[e])}}function t7(){return{isTma:(0,y.computed)(()=>eB())}}function t8(e){return t=>({...t,...th(e)})}function se(e,t){return(0,y.signal)(e,t)}let st=se(eP),ss=(...e)=>st()(...e),sr=t8({postEvent:ss});function sn(){let e=performance.getEntriesByType("navigation")[0];return!!e&&"reload"===e.type}function si(e){return t8({storage:{get:()=>(0,C.getStorageValue)(e),set(t){(0,C.setStorageValue)(e,t)}},isPageReload:sn})}let so=se("0.0"),sa=t8({version:so});function su(e,t){return{...e4(t7(),sr,sa,si(e)),onClick:(e,s)=>eI(t,e,s),offClick(e,s){eA(t,e,s)}}}let sl=new class{constructor(e){e2(this,"isVisible"),e2(this,"isMounted"),e2(this,"isSupported"),e2(this,"hideFp"),e2(this,"hide"),e2(this,"showFp"),e2(this,"show"),e2(this,"onClickFp"),e2(this,"onClick"),e2(this,"offClickFp"),e2(this,"offClick"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount");const t=new t9({...e,method:"web_app_setup_back_button",payload:e=>({is_visible:e.isVisible}),initialState:{isVisible:!1}});this.isVisible=t.stateGetter("isVisible"),this.isMounted=t.isMounted,this.isSupported=t.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=t.stateBoolSetters("isVisible"),this.onClick=t.onClick,this.onClickFp=t.onClickFp,this.offClick=t.offClick,this.offClickFp=t.offClickFp,this.mount=t.mount,this.mountFp=t.mountFp,this.unmount=t.unmount}}(su("backButton","back_button_pressed"));class sc{constructor({initialState:e,onMounted:t,restoreState:s,onUnmounted:r,isPageReload:n}){e2(this,"_isMounted",(0,y.signal)(!1)),e2(this,"isMounted",(0,y.computed)(this._isMounted)),e2(this,"mount"),e2(this,"unmount"),this.mount=r=>{if(this._isMounted())return tL(void 0);let i=th(n)?s():void 0;return e4(i?tL(i):e(r),tO(e=>{this._isMounted()||(0,y.batch)(()=>{this._isMounted.set(!0),null==t||t(e)})}))},this.unmount=()=>{this._isMounted()&&(0,y.batch)(()=>{this._isMounted.set(!1),null==r||r()})}}}let sp=new tQ("Biometry is not available");function sh(e){let t=!1,s=!1,r="",n=!1,i="",o=!1;return e.available&&(t=!0,s=e.token_saved,r=e.device_id,n=e.access_requested,i=e.type,o=e.access_granted),{available:t,tokenSaved:s,deviceId:r,type:i,accessGranted:o,accessRequested:n}}let sd=t8({request:(e,t,s)=>eR(e,t,{postEvent:ss,...s})});new class{constructor({version:e,request:t,postEvent:s,storage:r,onInfoReceived:n,offInfoReceived:i,isTma:o,isPageReload:a}){e2(this,"isAvailable"),e2(this,"isSupported"),e2(this,"isMounted"),e2(this,"state"),e2(this,"authenticateFp"),e2(this,"authenticate"),e2(this,"openSettingsFp"),e2(this,"openSettings"),e2(this,"requestAccessFp"),e2(this,"requestAccess"),e2(this,"updateTokenFp"),e2(this,"updateToken"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount");const u=e=>{l.setState(sh(e))},l=new tm({initialState:{available:!1,type:"unknown",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1},onChange:r.set}),c=new sc({initialState:e=>e4(t("web_app_biometry_get_info","biometry_info_received",e),tO(sh)),isPageReload:a,onMounted(e){l.setState(e),n(u)},onUnmounted(){i(u)},restoreState:r.get}),p={version:e,requires:"web_app_biometry_request_auth",isTma:o},h=t5({...p,returns:"either"}),d=t5({...p,returns:"task"}),f=t5({...p,isMounted:c.isMounted,returns:"task"});this.isAvailable=l.getter("available"),this.isMounted=c.isMounted,this.isSupported=tb("web_app_biometry_request_auth",e),this.state=l.state,this.unmount=c.unmount,this.mountFp=d(c.mount),this.authenticateFp=f(e=>this.isAvailable()?e4(t("web_app_biometry_request_auth","biometry_auth_requested",{...e,params:{reason:((e||{}).reason||"").trim()}}),tO(e=>(l.setState({token:e.token}),e))):tV(sp)),this.openSettingsFp=h(()=>s("web_app_biometry_open_settings")),this.requestAccessFp=f(e=>e4(t("web_app_biometry_request_access","biometry_info_received",{...e,params:{reason:((e||{}).reason||"").trim()}}),tD(e=>{let t=sh(e);return t.available?(l.setState(t),tL(t.accessRequested)):tV(sp)}))),this.updateTokenFp=f((e={})=>{var s;return e4(t("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:null==(s=e.reason)?void 0:s.trim()}}),tO(e=>e.status))}),this.authenticate=tk(this.authenticateFp),this.openSettings=tk(this.openSettingsFp),this.requestAccess=tk(this.requestAccessFp),this.updateToken=tk(this.updateTokenFp),this.mount=tk(this.mountFp)}}({...e4(t7(),sr,sa,sd,si("biometry")),offInfoReceived(e){eA("biometry_info_received",e)},onInfoReceived:e=>eI("biometry_info_received",e)}),new class{constructor({postEvent:e,storage:t,isTma:s,isPageReload:r}){e2(this,"isConfirmationEnabled"),e2(this,"isMounted"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount"),e2(this,"disableConfirmationFp"),e2(this,"disableConfirmation"),e2(this,"enableConfirmationFp"),e2(this,"enableConfirmation");const n=new tm({initialState:{isConfirmationEnabled:!1},onChange(e){t.set(e)}}),i=new td({onMounted:n.setState,restoreState:t.get,initialState:{isConfirmationEnabled:!1},isPageReload:r}),o={requires:"web_app_setup_closing_behavior",isTma:s},a=t5({...o,returns:"plain"}),u=t5({...o,returns:"either",isMounted:i.isMounted}),l=t=>t===this.isConfirmationEnabled()?e7(void 0):(n.setState({isConfirmationEnabled:t}),e("web_app_setup_closing_behavior",{need_confirmation:t}));this.isConfirmationEnabled=n.getter("isConfirmationEnabled"),this.isMounted=i.isMounted,this.disableConfirmationFp=u(()=>l(!1)),this.enableConfirmationFp=u(()=>l(!0)),this.mountFp=a(()=>{let e=()=>{};return e4(i.mount(),tu(e,e))}),this.unmount=i.unmount,this.disableConfirmation=tk(this.disableConfirmationFp),this.enableConfirmation=tk(this.enableConfirmationFp),this.mount=tk(this.mountFp)}}(e4(t7(),si("closingBehavior"),sr));let sf=se(0);function s_(){return sf.set(sf()+1),sf().toString()}let sm=t8({invokeCustomMethod:function(e,t,s){return eG(e,t,s_(),{...s||{},postEvent:ss})}});new class{constructor({version:e,isTma:t,invokeCustomMethod:s}){e2(this,"isSupported"),e2(this,"deleteItemFp"),e2(this,"deleteItem"),e2(this,"getItemFp"),e2(this,"getItem"),e2(this,"getItemsFp"),e2(this,"getItems"),e2(this,"getKeysFp"),e2(this,"getKeys"),e2(this,"setItemFp"),e2(this,"setItem"),e2(this,"clearFp"),e2(this,"clear");const r=t5({version:e,requires:"web_app_invoke_custom_method",isTma:t,returns:"task"});this.isSupported=tb("web_app_invoke_custom_method",e),this.deleteItemFp=r((e,t)=>{let r=Array.isArray(e)?e:[e];return e4(r.length?s("deleteStorageValues",{keys:r},t):tL(void 0),tO(()=>{}))}),this.getItemFp=r((e,t)=>e4(this.getItemsFp([e],t),tO(t=>t[e]||""))),this.getItemsFp=r((e,t)=>e4(e.length?s("getStorageValues",{keys:e},t):tL({}),tO(t=>({...e.reduce((e,t)=>(e[t]="",e),{}),...(0,w.parse)((0,w.record)((0,w.string)(),(0,w.string)()),t)})))),this.getKeysFp=r(e=>e4(s("getStorageKeys",{},e),tO(e=>(0,w.parse)((0,w.array)((0,w.string)()),e)))),this.setItemFp=r((e,t,r)=>e4(s("saveStorageValue",{key:e,value:t},r),tO(()=>{}))),this.clearFp=r(e=>e4(this.getKeysFp(e),tD(this.deleteItemFp))),this.deleteItem=tk(this.deleteItemFp),this.getItem=tk(this.getItemFp),this.getItems=tk(this.getItemsFp),this.getKeys=tk(this.getKeysFp),this.setItem=tk(this.setItemFp),this.clear=tk(this.clearFp)}}(e4(t7(),sa,sm));let sb=t8({createRequestId:s_});new class{constructor({isTma:e,request:t,version:s,createRequestId:r}){e2(this,"getItemFp"),e2(this,"getItem"),e2(this,"setItemFp"),e2(this,"setItem"),e2(this,"deleteItemFp"),e2(this,"deleteItem"),e2(this,"clearFp"),e2(this,"clear");const n=t5({version:s,requires:"web_app_device_storage_get_key",isTma:e,returns:"task"}),i=(e,s,n)=>{let i=r();return e4(t(e,["device_storage_failed",s],{params:{...n,req_id:i},capture:e=>!("payload"in e)||e.payload.req_id===i}),tD(e=>"device_storage_failed"===e.event?tV(new tH(e.payload.error||"UNKNOWN_ERROR")):tL(e.payload)))};this.getItemFp=n(e=>e4(i("web_app_device_storage_get_key","device_storage_key_received",{key:e}),tO(e=>e.value))),this.setItemFp=n((e,t)=>e4(i("web_app_device_storage_save_key","device_storage_key_saved",{key:e,value:t}),tO(()=>{}))),this.deleteItemFp=n(e=>this.setItemFp(e,null)),this.clearFp=n(()=>e4(i("web_app_device_storage_clear","device_storage_cleared",{}),tO(()=>{}))),this.getItem=tk(this.getItemFp),this.setItem=tk(this.setItemFp),this.deleteItem=tk(this.deleteItemFp),this.clear=tk(this.clearFp)}}(e4(t7(),sa,sd,sb)),tk(function({request:e,...t}){return t4(t=>e4(e("web_app_request_emoji_status_access","emoji_status_access_requested",t),tO(e=>e.status)),{...t,requires:"web_app_request_emoji_status_access",returns:"task"})}(e4(t7(),sa,sd))),tk(function({request:e,...t}){return t4((t,s)=>e4(e("web_app_set_emoji_status",["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:t,duration:(s||{}).duration},...s}),tD(e=>"emoji_status_failed"===e.event?tV(new t0(e.payload.error)):tL(void 0))),{...t,requires:"web_app_set_emoji_status",returns:"task"})}(e4(t7(),sd,sa))),new class{constructor({postEvent:e,isTma:t,version:s}){e2(this,"isSupported"),e2(this,"impactOccurredFp"),e2(this,"impactOccurred"),e2(this,"notificationOccurredFp"),e2(this,"notificationOccurred"),e2(this,"selectionChangedFp"),e2(this,"selectionChanged");const r="web_app_trigger_haptic_feedback",n=t5({requires:r,isTma:t,version:s,returns:"plain"});this.isSupported=tb(r,s),this.impactOccurredFp=n(t=>e(r,{type:"impact",impact_style:t})),this.notificationOccurredFp=n(t=>e(r,{type:"notification",notification_type:t})),this.selectionChangedFp=n(()=>e(r,{type:"selection_change"})),this.impactOccurred=tk(this.impactOccurredFp),this.notificationOccurred=tk(this.notificationOccurredFp),this.selectionChanged=tk(this.selectionChangedFp)}}(e4(t7(),sr,sa)),tk(function({postEvent:e,...t}){return t4(()=>e("web_app_add_to_home_screen"),{...t,requires:"web_app_add_to_home_screen",returns:"either"})}(e4(t7(),sa,sr))),tk(function({request:e,...t}){return t4(t=>e4(e("web_app_check_home_screen","home_screen_checked",t),tO(e=>e.status||"unknown")),{...t,requires:"web_app_check_home_screen",returns:"task"})}(e4(t7(),sa,sd)));let sg=new class{constructor({retrieveInitData:e}){e2(this,"_state",(0,y.signal)()),e2(this,"_raw",(0,y.signal)()),e2(this,"state",(0,y.computed)(this._state)),e2(this,"authDate",this.fromState("auth_date")),e2(this,"canSendAfter",this.fromState("can_send_after")),e2(this,"canSendAfterDate",(0,y.computed)(()=>{let e=this.authDate(),t=this.canSendAfter();return t&&e?new Date(e.getTime()+1e3*t):void 0})),e2(this,"chat",this.fromState("chat")),e2(this,"chatType",this.fromState("chat_type")),e2(this,"chatInstance",this.fromState("chat_instance")),e2(this,"hash",this.fromState("hash")),e2(this,"queryId",this.fromState("query_id")),e2(this,"raw",(0,y.computed)(this._raw)),e2(this,"receiver",this.fromState("receiver")),e2(this,"signature",this.fromState("signature")),e2(this,"startParam",this.fromState("start_param")),e2(this,"user",this.fromState("user")),e2(this,"restoreFp"),e2(this,"restore"),this.restoreFp=()=>e4(e(),ti(tC(()=>{},({raw:e,obj:t})=>{this._state.set(t),this._raw.set(e)}))),this.restore=(0,C.throwifyFpFn)(this.restoreFp)}fromState(e){return(0,y.computed)(()=>{let t=this._state();return t?t[e]:void 0})}}({retrieveInitData:()=>e4(tc,tp("obj",()=>e4(eo(),ti(({tgWebAppData:e})=>e?tv(e):tg))),tp("raw",eu),ti(({obj:e,raw:t})=>e4(tF,tS("obj",()=>e),tS("raw",()=>t))))});new class{constructor({version:e,request:t,isTma:s}){e2(this,"isOpened"),e2(this,"isSupported"),e2(this,"openSlugFp"),e2(this,"openSlug"),e2(this,"openUrlFp"),e2(this,"openUrl");const r=t5({version:e,isTma:s,requires:"web_app_open_invoice",returns:"task"}),n=(0,y.signal)(!1),i=()=>{n.set(!1)};this.isSupported=tb("web_app_open_invoice",e),this.isOpened=(0,y.computed)(n),this.openSlugFp=r((e,s)=>e4(this.isOpened()?tV(new tX("Invoice is already opened")):tL(void 0),tD(()=>(n.set(!0),t("web_app_open_invoice","invoice_closed",{...s,params:{slug:e},capture:t=>e===t.slug}))),t$(e=>(i(),e),e=>(i(),e.status)))),this.openUrlFp=r((e,t)=>{let{hostname:s,pathname:r}=new URL(e,window.location.href);if("t.me"!==s)return tV(new tY(`Link has unexpected hostname: ${s}`));let n=r.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);return n?this.openSlugFp(n[2],t):tV(new tY('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"'))}),this.openUrl=tk(this.openUrlFp),this.openSlug=tk(this.openSlugFp)}}(e4(t7(),sd,sa));let sv=tk(function({postEvent:e,...t}){return t4((t,s={})=>{if("string"==typeof t)try{t=new URL(t)}catch(e){return e9(new tY(`"${t.toString()}" is invalid URL`,e))}return e("web_app_open_link",{url:t.toString(),try_browser:s.tryBrowser,try_instant_view:s.tryInstantView})},{...t,returns:"either"})}(e4(t7(),sr))),sy=function({postEvent:e,version:t,...s}){return t4(s=>{let r=s.toString();return r.match(/^https:\/\/t.me\/.+/)?eU("web_app_open_tg_link",th(t))?e("web_app_open_tg_link",{path_full:(s=new URL(s)).pathname+s.search}):(window.location.href=r,e7(void 0)):e9(new tY(`"${r}" is invalid URL`))},{...s,returns:"either"})}(e4(t7(),sr,sa));function sw(e){let t=!1,s,r;return e.available&&(t=!0,s=e.access_requested,r=e.access_granted),{available:t,accessGranted:r||!1,accessRequested:s||!1}}function sC(e,t){document.documentElement.style.setProperty(e,t)}function sF(e){document.documentElement.style.removeProperty(e)}tk(sy),tk(function({openTelegramLink:e,...t}){return t4((t,s)=>e("https://t.me/share/url?"+new URLSearchParams({url:t,text:s||""}).toString().replace(/\+/g,"%20")),{...t,returns:"either"})}({...t7(),openTelegramLink:sy})),new class{constructor({version:e,request:t,postEvent:s,storage:r,isTma:n,isPageReload:i}){e2(this,"state"),e2(this,"isAvailable"),e2(this,"isAccessGranted"),e2(this,"isAccessRequested"),e2(this,"isMounted"),e2(this,"isSupported"),e2(this,"openSettingsFp"),e2(this,"openSettings"),e2(this,"requestLocationFp"),e2(this,"requestLocation"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount");const o=new tm({initialState:{available:!1,accessGranted:!1,accessRequested:!1},onChange:r.set}),a=new sc({isPageReload:i,restoreState:r.get,onMounted:o.setState,initialState:e=>e4(t("web_app_check_location","location_checked",e),tO(sw))}),u={version:e,requires:"web_app_check_location",isTma:n},l=t5({...u,returns:"either"}),c=t5({...u,returns:"task"}),p=t5({...u,returns:"task",isMounted:a.isMounted});this.isAvailable=o.getter("available"),this.isAccessRequested=o.getter("accessRequested"),this.isAccessGranted=o.getter("accessGranted"),this.isSupported=tb("web_app_check_location",e),this.isMounted=a.isMounted,this.state=o.state,this.unmount=a.unmount,this.mountFp=c(a.mount),this.openSettingsFp=l(()=>s("web_app_open_location_settings")),this.requestLocationFp=p(e=>e4(t("web_app_request_location","location_requested",e),tO(e=>{if(!e.available)return o.setState({available:!1}),null;let{available:t,...s}=e;return s}))),this.mount=tk(this.mountFp),this.openSettings=tk(this.openSettingsFp),this.requestLocation=tk(this.requestLocationFp)}}(e4(t7(),sr,sa,sd,si("locationManager")));let sS=(0,C.throwifyFpFn)(function(e){return e4((0,k.toRGBFullFp)(e),ti(e=>120>Math.sqrt([.299,.587,.114].reduce((t,s,r)=>{let n=parseInt(e.slice(1+2*r,1+(r+1)*2),16);return t+n*n*s},0))))}),sk=se({}),sE=new class{constructor({initialState:e,onChange:t,offChange:s,isTma:r,storage:n,isPageReload:i}){e2(this,"accentTextColor"),e2(this,"bgColor"),e2(this,"buttonColor"),e2(this,"buttonTextColor"),e2(this,"bottomBarBgColor"),e2(this,"destructiveTextColor"),e2(this,"headerBgColor"),e2(this,"hintColor"),e2(this,"linkColor"),e2(this,"secondaryBgColor"),e2(this,"sectionBgColor"),e2(this,"sectionHeaderTextColor"),e2(this,"sectionSeparatorColor"),e2(this,"subtitleTextColor"),e2(this,"textColor"),e2(this,"_isCssVarsBound",(0,y.signal)(!1)),e2(this,"isCssVarsBound",(0,y.computed)(this._isCssVarsBound)),e2(this,"bindCssVarsFp"),e2(this,"bindCssVars"),e2(this,"state"),e2(this,"isDark",(0,y.computed)(()=>{let e=this.bgColor();return!e||sS(e)})),e2(this,"isMounted"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount");const o=new tm({initialState:{},onChange:n.set}),a=e=>{o.setState(e.theme_params)},u=new td({initialState:()=>e7(th(e)),isPageReload:i,onMounted(e){o.setState(e),t(a)},onUnmounted(){s(a)},restoreState:n.get}),l={isTma:r,returns:"either"},c=t5(l),p=t5({...l,isMounted:u.isMounted});this.accentTextColor=o.getter("accent_text_color"),this.bgColor=o.getter("bg_color"),this.buttonColor=o.getter("button_color"),this.buttonTextColor=o.getter("button_text_color"),this.bottomBarBgColor=o.getter("bottom_bar_bg_color"),this.destructiveTextColor=o.getter("destructive_text_color"),this.headerBgColor=o.getter("header_bg_color"),this.hintColor=o.getter("hint_color"),this.linkColor=o.getter("link_color"),this.secondaryBgColor=o.getter("secondary_bg_color"),this.sectionBgColor=o.getter("section_bg_color"),this.sectionHeaderTextColor=o.getter("section_header_text_color"),this.sectionSeparatorColor=o.getter("section_separator_color"),this.subtitleTextColor=o.getter("subtitle_text_color"),this.textColor=o.getter("text_color"),this.state=o.state,this.isMounted=u.isMounted,this.bindCssVarsFp=p(e=>{if(this._isCssVarsBound())return e9(new tz);e||(e=e=>`--tg-theme-${(0,C.snakeToKebab)(e)}`);let t=e=>{Object.entries(o.state()).forEach(([t,s])=>{s&&e(t,s)})},s=()=>{t((t,s)=>{sC(e(t),s)})};return s(),o.state.sub(s),this._isCssVarsBound.set(!0),e7(()=>{t(sF),o.state.unsub(s),this._isCssVarsBound.set(!1)})}),this.mountFp=c(u.mount),this.unmount=u.unmount,this.bindCssVars=tk(this.bindCssVarsFp),this.mount=tk(this.mountFp)}}({...e4(t7(),si("themeParams")),offChange(e){eA("theme_changed",e)},onChange(e){eI("theme_changed",e)},initialState:sk});function sx(e,t,s){return e4(su(e,t),e=>({...e,defaults:s}))}new class{constructor({defaults:e,...t}){e2(this,"bgColor"),e2(this,"hasShineEffect"),e2(this,"isEnabled"),e2(this,"isLoaderVisible"),e2(this,"isVisible"),e2(this,"isMounted"),e2(this,"state"),e2(this,"text"),e2(this,"textColor"),e2(this,"showFp"),e2(this,"show"),e2(this,"hideFp"),e2(this,"hide"),e2(this,"enableFp"),e2(this,"enable"),e2(this,"enableShineEffectFp"),e2(this,"enableShineEffect"),e2(this,"disableFp"),e2(this,"disable"),e2(this,"disableShineEffectFp"),e2(this,"disableShineEffect"),e2(this,"setBgColorFp"),e2(this,"setBgColor"),e2(this,"setTextColorFp"),e2(this,"setTextColor"),e2(this,"setTextFp"),e2(this,"setText"),e2(this,"showLoaderFp"),e2(this,"showLoader"),e2(this,"hideLoaderFp"),e2(this,"hideLoader"),e2(this,"setParamsFp"),e2(this,"setParams"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount"),e2(this,"onClickFp"),e2(this,"onClick"),e2(this,"offClickFp"),e2(this,"offClick");const s=new t9({...t,version:"100",initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"},method:"web_app_setup_main_button",payload:e=>({has_shine_effect:e.hasShineEffect,is_visible:e.isVisible,is_active:e.isEnabled,is_progress_visible:e.isLoaderVisible,text:e.text,color:e.bgColor,text_color:e.textColor})}),r=(e,t)=>{let r=s.stateGetter(e);return(0,y.computed)(()=>r()||th(t))};this.bgColor=r("bgColor",e.bgColor),this.textColor=r("textColor",e.textColor),this.hasShineEffect=s.stateGetter("hasShineEffect"),this.isEnabled=s.stateGetter("isEnabled"),this.isLoaderVisible=s.stateGetter("isLoaderVisible"),this.text=s.stateGetter("text"),this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.state=s.state,[this.setBgColor,this.setBgColorFp]=s.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=s.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=s.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=s.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=s.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=s.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.setParams=s.setState,this.setParamsFp=s.setStateFp,this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}(sx("mainButton","main_button_pressed",{bgColor:(0,y.computed)(()=>sE.buttonColor()||"#2481cc"),textColor:(0,y.computed)(()=>sE.buttonTextColor()||"#ffffff")}));let sI=new class{constructor({storage:e,isPageReload:t,version:s,postEvent:r,isTma:n,theme:i,onVisibilityChanged:o,offVisibilityChanged:a}){e2(this,"isSupported"),e2(this,"isDark",(0,y.computed)(()=>{let e=this.bgColorRgb();return!!e&&sS(e)})),e2(this,"isActive"),e2(this,"state"),e2(this,"isCssVarsBound"),e2(this,"bindCssVarsFp"),e2(this,"bindCssVars"),e2(this,"isMounted"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount"),e2(this,"bgColor"),e2(this,"bgColorRgb"),e2(this,"setBgColorFp"),e2(this,"setBgColor"),e2(this,"headerColor"),e2(this,"headerColorRgb"),e2(this,"setHeaderColorFp"),e2(this,"setHeaderColor"),e2(this,"bottomBarColor"),e2(this,"bottomBarColorRgb"),e2(this,"setBottomBarColorFp"),e2(this,"setBottomBarColor"),e2(this,"closeFp"),e2(this,"close"),e2(this,"readyFp"),e2(this,"ready");const u=e=>{p.setState({isActive:e.is_visible})},l=e=>{[[this.headerColor,"web_app_set_header_color"],[this.bgColor,"web_app_set_background_color"],[this.bottomBarColor,"web_app_set_bottom_bar_color"]].forEach(([t,s])=>{let n=t();if(!(0,k.isRGB)(n)&&("web_app_set_header_color"!==s||!["bg_color","secondary_bg_color"].includes(n))){let t=e[n];t&&r(s,{color:t})}})},c=new td({initialState:()=>e7({bgColor:"bg_color",headerColor:"header_bg_color",bottomBarColor:"bottom_bar_bg_color",isActive:!0}),isPageReload:t,onMounted:e=>{o(u),i.sub(l),p.setState(e)},onUnmounted(){a(u),i.unsub(l)},restoreState:e.get});this.isMounted=c.isMounted,this.mountFp=t4(()=>{let e=()=>{};return e4(c.mount(),tu(e,e))},{isTma:n,returns:"plain"}),this.mount=tk(this.mountFp),this.unmount=c.unmount;const p=new tm({initialState:{bgColor:"bg_color",bottomBarColor:"bottom_bar_bg_color",headerColor:"bg_color",isActive:!1},onChange:e.set});this.state=p.state;const h=e=>(0,k.isRGB)(e)?e:th(i)[e];this.isActive=p.getter("isActive"),this.isSupported=(0,y.computed)(()=>["web_app_set_header_color","web_app_set_background_color","web_app_set_bottom_bar_color"].some(e=>eU(e,th(s))));const d=(0,y.signal)(!1);this.isCssVarsBound=(0,y.computed)(d),this.bindCssVarsFp=t4(e=>{if(d())return e9(new tz);let[t,s]=(0,C.createCbCollector)(()=>{d.set(!1)}),r=(e,s)=>{let r=()=>{sC(e,s()||null)};r(),t(s.sub(r),sF.bind(null,e))};return e||(e=e=>`--tg-${(0,C.camelToKebab)(e)}`),r(e("bgColor"),this.bgColorRgb),r(e("bottomBarColor"),this.bottomBarColorRgb),r(e("headerColor"),this.headerColorRgb),d.set(!0),e7(s)},{isTma:n,returns:"either",isMounted:this.isMounted}),this.bindCssVars=tk(this.bindCssVarsFp);const f=e=>{let t=p.getter(e),i=(0,y.computed)(()=>h(t())),o={headerColor:"web_app_set_header_color",bgColor:"web_app_set_background_color",bottomBarColor:"web_app_set_bottom_bar_color"}[e],a=t4(s=>{if(s===t())return e7(void 0);if("web_app_set_header_color"===o&&("bg_color"===s||"secondary_bg_color"===s))return e4(r("web_app_set_header_color",{color_key:s}),ti(()=>{p.setState({[e]:s})}));let n=h(s);return e4(n?r(o,{color:n}):e9(new t3(s)),ti(()=>{p.setState({[e]:s})}))},{isTma:n,version:s,requires:o,isMounted:this.isMounted,returns:"either",supports:"headerColor"===e?{rgb:{method:"web_app_set_header_color",param:"color",shouldCheck:k.isRGB}}:void 0});return[t,i,tk(a),a]};[this.bgColor,this.bgColorRgb,this.setBgColor,this.setBgColorFp]=f("bgColor"),[this.headerColor,this.headerColorRgb,this.setHeaderColor,this.setHeaderColorFp]=f("headerColor"),[this.bottomBarColor,this.bottomBarColorRgb,this.setBottomBarColor,this.setBottomBarColorFp]=f("bottomBarColor");const _=t5({isTma:n,returns:"either"});this.closeFp=_(e=>r("web_app_close",{return_back:e})),this.close=tk(this.closeFp),this.readyFp=_(()=>r("web_app_ready")),this.ready=tk(this.readyFp)}}({...e4(t7(),sr,sa,si("miniApp")),offVisibilityChanged(e){eA("visibility_changed",e)},onVisibilityChanged(e){eI("visibility_changed",e)},theme:sE.state});new class{constructor({version:e,isTma:t,request:s}){e2(this,"isOpened"),e2(this,"isSupported"),e2(this,"showFp"),e2(this,"show");const r=(0,y.signal)(!1),n=()=>{r.set(!1)},i=t5({version:e,isTma:t,requires:"web_app_open_popup",returns:"task"});this.isSupported=tb("web_app_open_popup",e),this.isOpened=(0,y.computed)(r),this.showFp=i(e=>e4(this.isOpened()?tV(new tX("A popup is already opened")):tL(void 0),tD(()=>tT(function(e){let t=e.message.trim(),s=(e.title||"").trim(),r=e.buttons||[];if(s.length>64)return e9(new tY(`Invalid title: ${s}`));if(!t||t.length>256)return e9(new tY(`Invalid message: ${t}`));if(r.length>3)return e9(new tY(`Invalid buttons count: ${r.length}`));let n=[];if(r.length)for(let e=0;e<r.length;e++){let t=r[e],s=t.id||"";if(s.length>64)return e9(new tY(`Button with index ${e} has invalid id: ${s}`));if(t.type&&"default"!==t.type&&"destructive"!==t.type)n.push({type:t.type,id:s});else{let r=t.text.trim();if(!r||r.length>64)return e9(new tY(`Button with index ${e} has invalid text: ${r}`));n.push({type:t.type,text:r,id:s})}}else n.push({type:"close",id:""});return e7({title:s,message:t,buttons:n})}(e))),tD(t=>(r.set(!0),s("web_app_open_popup","popup_closed",{...e,params:t}))),t$(e=>(n(),e),e=>(n(),e.button_id)))),this.show=tk(this.showFp)}}(e4(t7(),sd,sa));let sA=function({request:e,...t}){return t4(t=>e4(e("web_app_request_phone","phone_requested",t),tO(e=>e.status)),{...t,requires:"web_app_request_phone",returns:"task"})}(e4(t7(),sa,sd));tk(sA);let sT=function({invokeCustomMethod:e,requestPhoneAccess:t,...s}){let r=t=>e4(e4(e("getRequestedContact",{},{...t,timeout:(t||{}).timeout||5e3}),tD(e=>{let t=(0,w.safeParse)((0,w.string)(),e);if(!t.success)return tV(new tK(e,t.issues));if(!t.output)return tL(void 0);let s=(0,w.safeParse)((0,k.pipeQueryToSchema)((0,w.looseObject)({contact:(0,k.pipeJsonToSchema)((0,w.looseObject)({user_id:(0,w.number)(),phone_number:(0,w.string)(),first_name:(0,w.string)(),last_name:(0,w.optional)((0,w.string)())})),auth_date:(0,w.pipe)((0,w.string)(),(0,w.transform)(e=>new Date(1e3*Number(e))),(0,w.date)()),hash:(0,w.string)()})),t.output);return s.success?tL({raw:t.output,parsed:s.output}):tV(new tK(t.output,s.issues))})),tj(e=>tK.is(e)?e9(e):e7(void 0),e=>e7(e)));return t4(e=>C.BetterTaskEither.fn(e=>e4(r(e),tD(s=>s?tL(s):e4(t(e),tD(t=>"sent"===t?(0,C.BetterTaskEither)(async(e,t,s)=>{let n=50;for(;!s.isRejected;){let i=await r(s)();if("Left"===i._tag)return t(i.left);if(i.right)return e(i.right);await new Promise(e=>setTimeout(e,n)),n+=50}},e):tV(new t1("User denied access")))))),e),{...s,returns:"task",requires:"web_app_request_phone"})}({...e4(t7(),sm,sa),requestPhoneAccess:sA}),sq=(tk(sT),function({requestContact:e,...t}){return t4(e,{...t,returns:"task",requires:"web_app_request_phone"})}({...e4(t7(),sa),requestContact:e=>e4(sT(e),tO(e=>e.parsed))}));function sP(e){let t={},s=e.match(/Telegram-Android(?:\/([^ ]+))?(?: (\([^)]+\))?|$)/);if(s){let[,e,r]=s;e&&(t.appVersion=e),r&&r.slice(1,r.length-1).split(";").forEach(e=>{let[s,r]=e.trim().split(" ");if("Android"===s)t.androidVersion=r;else if("SDK"===s){let e=parseInt(r,10);e&&(t.sdkVersion=e)}else r?(t.manufacturer=s,t.model=r):t.performanceClass=s})}return t}function sR(){return sP(navigator.userAgent)}tk(sq),tk(function({request:e,...t}){return t4(t=>e4(e("web_app_request_write_access","write_access_requested",t),tO(e=>e.status)),{...t,requires:"web_app_request_write_access",returns:"task"})}(e4(t7(),sa,sd))),new class{constructor({version:e,onClosed:t,onTextReceived:s,isTma:r,postEvent:n}){e2(this,"isOpened"),e2(this,"isSupported"),e2(this,"captureFp"),e2(this,"capture"),e2(this,"closeFp"),e2(this,"close"),e2(this,"openFp"),e2(this,"open");const i={version:e,requires:"web_app_open_scan_qr_popup",isTma:r},o=t5({...i,returns:"either"}),a=t5({...i,returns:"task"}),u=(0,y.signal)(!1),l=()=>{u.set(!1)};this.isSupported=tb("web_app_open_scan_qr_popup",e),this.isOpened=(0,y.computed)(u),this.captureFp=a(e=>{let t;return e4(this.openFp({...e,onCaptured:s=>{e.capture(s)&&(t=s,this.close())}}),tO(()=>t))}),this.closeFp=o(()=>e4(n("web_app_close_scan_qr_popup"),ti(l))),this.openFp=a(e=>e4(u()?tV(new tX("The QR Scanner is already opened")):async()=>n("web_app_open_scan_qr_popup",{text:e.text}),tD(()=>{u.set(!0);let[r,n]=(0,C.createCbCollector)(),i=e=>(n(),u.set(!1),e);return e4((0,C.BetterTaskEither)(n=>{r(t(n),u.sub(e=>{e||n()}),s(e.onCaptured))},e),t$(i,i))}))),this.open=tk(this.openFp),this.capture=tk(this.captureFp),this.close=tk(this.closeFp)}}({...e4(t7(),sr,sa),onClosed:e=>eI("scan_qr_popup_closed",e),onTextReceived:e=>eI("qr_text_received",t=>{e(t.data)})}),new class{constructor({defaults:e,...t}){e2(this,"isSupported"),e2(this,"position"),e2(this,"bgColor"),e2(this,"hasShineEffect"),e2(this,"isEnabled"),e2(this,"isLoaderVisible"),e2(this,"isVisible"),e2(this,"isMounted"),e2(this,"state"),e2(this,"text"),e2(this,"textColor"),e2(this,"showFp"),e2(this,"show"),e2(this,"hideFp"),e2(this,"hide"),e2(this,"enableFp"),e2(this,"enable"),e2(this,"enableShineEffectFp"),e2(this,"enableShineEffect"),e2(this,"disableFp"),e2(this,"disable"),e2(this,"disableShineEffectFp"),e2(this,"disableShineEffect"),e2(this,"setBgColorFp"),e2(this,"setBgColor"),e2(this,"setTextColorFp"),e2(this,"setTextColor"),e2(this,"setTextFp"),e2(this,"setText"),e2(this,"setPositionFp"),e2(this,"setPosition"),e2(this,"showLoaderFp"),e2(this,"showLoader"),e2(this,"hideLoaderFp"),e2(this,"hideLoader"),e2(this,"setParamsFp"),e2(this,"setParams"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount"),e2(this,"onClickFp"),e2(this,"onClick"),e2(this,"offClickFp"),e2(this,"offClick");const s=new t9({...t,initialState:{hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Cancel",position:"left"},method:"web_app_setup_secondary_button",payload:e=>({has_shine_effect:e.hasShineEffect,is_visible:e.isVisible,is_active:e.isEnabled,is_progress_visible:e.isLoaderVisible,text:e.text,color:e.bgColor,text_color:e.textColor,position:e.position})}),r=(e,t)=>{let r=s.stateGetter(e);return(0,y.computed)(()=>r()||th(t))};this.isSupported=tb("web_app_setup_secondary_button",t.version),this.bgColor=r("bgColor",e.bgColor),this.textColor=r("textColor",e.textColor),this.position=s.stateGetter("position"),this.hasShineEffect=s.stateGetter("hasShineEffect"),this.isEnabled=s.stateGetter("isEnabled"),this.isLoaderVisible=s.stateGetter("isLoaderVisible"),this.text=s.stateGetter("text"),this.isVisible=s.stateGetter("isVisible"),this.isMounted=s.isMounted,this.state=s.state,[this.setPosition,this.setPositionFp]=s.stateSetters("position"),[this.setBgColor,this.setBgColorFp]=s.stateSetters("bgColor"),[this.setTextColor,this.setTextColorFp]=s.stateSetters("textColor"),[[this.disableShineEffect,this.disableShineEffectFp],[this.enableShineEffect,this.enableShineEffectFp]]=s.stateBoolSetters("hasShineEffect"),[[this.disable,this.disableFp],[this.enable,this.enableFp]]=s.stateBoolSetters("isEnabled"),[[this.hideLoader,this.hideLoaderFp],[this.showLoader,this.showLoaderFp]]=s.stateBoolSetters("isLoaderVisible"),[this.setText,this.setTextFp]=s.stateSetters("text"),[[this.hide,this.hideFp],[this.show,this.showFp]]=s.stateBoolSetters("isVisible"),this.setParams=s.setState,this.setParamsFp=s.setStateFp,this.onClick=s.onClick,this.onClickFp=s.onClickFp,this.offClick=s.offClick,this.offClickFp=s.offClickFp,this.mount=s.mount,this.mountFp=s.mountFp,this.unmount=s.unmount}}(sx("secondaryButton","secondary_button_pressed",{bgColor:(0,y.computed)(()=>sI.bottomBarColorRgb()||"#000000"),textColor:(0,y.computed)(()=>sE.buttonColor()||"#2481cc")})),new class{constructor({isTma:e,request:t,version:s,createRequestId:r}){e2(this,"getItemFp"),e2(this,"getItem"),e2(this,"restoreItemFp"),e2(this,"restoreItem"),e2(this,"setItemFp"),e2(this,"setItem"),e2(this,"deleteItemFp"),e2(this,"deleteItem"),e2(this,"clearFp"),e2(this,"clear");const n=t5({version:s,requires:"web_app_secure_storage_get_key",isTma:e,returns:"task"}),i=(e,s,n)=>{let i=r();return e4(t(e,["secure_storage_failed",s],{params:{...n,req_id:i},capture:e=>!("payload"in e)||e.payload.req_id===i}),tD(e=>"secure_storage_failed"===e.event?tV(new tJ(e.payload.error||"UNKNOWN_ERROR")):tL(e.payload)))};this.getItemFp=n(e=>e4(i("web_app_secure_storage_get_key","secure_storage_key_received",{key:e}),tO(e=>({value:e.value,canRestore:!!e.can_restore})))),this.setItemFp=n((e,t)=>e4(i("web_app_secure_storage_save_key","secure_storage_key_saved",{key:e,value:t}),tO(()=>{}))),this.deleteItemFp=n(e=>this.setItemFp(e,null)),this.clearFp=n(()=>e4(i("web_app_secure_storage_clear","secure_storage_cleared",{}),tO(()=>{}))),this.restoreItemFp=n(e=>e4(i("web_app_secure_storage_restore_key","secure_storage_key_restored",{key:e}),tO(e=>e.value))),this.getItem=tk(this.getItemFp),this.setItem=tk(this.setItemFp),this.deleteItem=tk(this.deleteItemFp),this.clear=tk(this.clearFp),this.restoreItem=tk(this.restoreItemFp)}}(e4(t7(),sa,sd,sb)),new class{constructor(e){e2(this,"isVisible"),e2(this,"isMounted"),e2(this,"isSupported"),e2(this,"hideFp"),e2(this,"hide"),e2(this,"showFp"),e2(this,"show"),e2(this,"onClickFp"),e2(this,"onClick"),e2(this,"offClickFp"),e2(this,"offClick"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount");const t=new t9({...e,method:"web_app_setup_settings_button",payload:e=>({is_visible:e.isVisible}),initialState:{isVisible:!1}});this.isVisible=t.stateGetter("isVisible"),this.isMounted=t.isMounted,this.isSupported=t.isSupported,[[this.hide,this.hideFp],[this.show,this.showFp]]=t.stateBoolSetters("isVisible"),this.onClick=t.onClick,this.onClickFp=t.onClickFp,this.offClick=t.offClick,this.offClickFp=t.offClickFp,this.mount=t.mount,this.mountFp=t.mountFp,this.unmount=t.unmount}}(su("settingsButton","settings_button_pressed")),new class{constructor({postEvent:e,storage:t,isTma:s,isPageReload:r,version:n}){e2(this,"isSupported"),e2(this,"isVerticalEnabled"),e2(this,"isMounted"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"unmount"),e2(this,"disableVerticalFp"),e2(this,"disableVertical"),e2(this,"enableVerticalFp"),e2(this,"enableVertical");const i={isVerticalEnabled:!0},o=new tm({initialState:i,onChange(e){t.set(e)}}),a=new td({initialState:i,isPageReload:r,onMounted:o.setState,restoreState:t.get}),u={requires:"web_app_setup_swipe_behavior",isTma:s,version:n},l=t5({...u,returns:"plain"}),c=t5({...u,isMounted:a.isMounted,returns:"either"}),p=t=>{let s={isVerticalEnabled:t};return o.hasDiff(s)?e4(e("web_app_setup_swipe_behavior",{allow_vertical_swipe:t}),ti(()=>{o.setState(s)})):e7(void 0)};this.isSupported=tb("web_app_setup_swipe_behavior",n),this.isVerticalEnabled=o.getter("isVerticalEnabled"),this.isMounted=a.isMounted,this.disableVerticalFp=c(()=>p(!1)),this.enableVerticalFp=c(()=>p(!0)),this.mountFp=l(()=>{let e=()=>{};return e4(a.mount(),tu(e,e))}),this.unmount=a.unmount,this.disableVertical=tk(this.disableVerticalFp),this.enableVertical=tk(this.enableVerticalFp),this.mount=tk(this.mountFp)}}(e4(t7(),sr,sa,si("swipeBehavior"))),tk(function({request:e,...t}){return t4((t,s,r)=>e4(e("web_app_request_file_download","file_download_requested",{...r,params:{url:t,file_name:s}}),tD(e=>"downloading"===e.status?tL(void 0):tV(new t1("User denied the action")))),{...t,requires:"web_app_request_file_download",returns:"task"})}(e4(t7(),sd,sa))),tk(function({invokeCustomMethod:e,...t}){return t4(t=>e4(e("getCurrentTime",{},t),tD(e=>{let t=(0,w.safeParse)((0,w.pipe)((0,w.number)(),(0,w.integer)(),(0,w.transform)(e=>new Date(1e3*e)),(0,w.date)()),e);return t.success?tL(t.output):tV(new tK(e,t.issues))})),{...t,requires:"web_app_invoke_custom_method",returns:"task"})}(e4(t7(),sm,sa))),tk(function({postEvent:e,...t}){return t4(()=>e("web_app_hide_keyboard"),{...t,returns:"either",requires:"web_app_hide_keyboard"})}(e4(t7(),sr,sa))),tk(function({request:e,createRequestId:t,...s}){return t4(s=>{let r=t();return e4(e("web_app_read_text_from_clipboard","clipboard_text_received",{...s,params:{req_id:r},capture:eL(r)}),tO(({data:e=null})=>e))},{...s,requires:"web_app_read_text_from_clipboard",returns:"task"})}({...e4(t7(),sa,sd),createRequestId:s_})),tk(function({postEvent:e,...t}){return t4(t=>{let{size:s}=new Blob([t]);return!s||s>4096?e9(new tY(s?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data")):e("web_app_data_send",{data:t})},{...t,returns:"either"})}(e4(t7(),sr))),tk(function({request:e,...t}){return t4((t,s)=>e4(e("web_app_send_prepared_message",["prepared_message_failed","prepared_message_sent"],{...s,params:{id:t}}),tD(e=>"prepared_message_failed"===e.event?tV(new t6(e.payload.error)):tL(void 0))),{...t,requires:"web_app_send_prepared_message",returns:"task"})}(e4(t7(),sd,sa)));let sM=(tk(function({postEvent:e,...t}){return t4((t,s={})=>e("web_app_share_to_story",{text:s.text,media_url:t,widget_link:s.widgetLink}),{...t,requires:"web_app_share_to_story",returns:"either"})}(e4(t7(),sr,sa))),se(!1));tk(function({isInlineMode:e,postEvent:t,...s}){return t4((e,s)=>t("web_app_switch_inline_query",{query:e,chat_types:s||[]}),{...s,requires:{every:["web_app_switch_inline_query",()=>th(e)?void 0:"The application must be launched in the inline mode"]},returns:"either"})}({...e4(t7(),sr,sa),isInlineMode:sM}));let sB=(i=(n=e=>({on:t=>{eI(e,t)},off:t=>{eA(e,t)}}))("viewport_changed"),o=n("fullscreen_changed"),a=n("safe_area_changed"),u=n("content_safe_area_changed"),new class e{constructor({storage:e,isPageReload:t,onContentSafeAreaInsetsChanged:s,onSafeAreaInsetsChanged:r,onViewportChanged:n,onFullscreenChanged:i,offContentSafeAreaInsetsChanged:o,offFullscreenChanged:a,offSafeAreaInsetsChanged:u,offViewportChanged:l,request:c,isViewportStable:p,isFullscreen:h,isTma:d,version:f,postEvent:_}){e2(this,"state"),e2(this,"height"),e2(this,"stableHeight"),e2(this,"width"),e2(this,"isExpanded"),e2(this,"isStable",(0,y.computed)(()=>this.height()===this.stableHeight())),e2(this,"contentSafeAreaInsets"),e2(this,"contentSafeAreaInsetTop"),e2(this,"contentSafeAreaInsetLeft"),e2(this,"contentSafeAreaInsetRight"),e2(this,"contentSafeAreaInsetBottom"),e2(this,"safeAreaInsets"),e2(this,"safeAreaInsetTop"),e2(this,"safeAreaInsetLeft"),e2(this,"safeAreaInsetRight"),e2(this,"safeAreaInsetBottom"),e2(this,"isFullscreen"),e2(this,"requestFullscreenFp"),e2(this,"requestFullscreen"),e2(this,"exitFullscreenFp"),e2(this,"exitFullscreen"),e2(this,"isCssVarsBound"),e2(this,"bindCssVarsFp"),e2(this,"bindCssVars"),e2(this,"isMounted"),e2(this,"mountFp"),e2(this,"mount"),e2(this,"expandFp"),e2(this,"expand");const m={top:0,right:0,left:0,bottom:0},b=new tm({initialState:{contentSafeAreaInsets:m,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:m,stableHeight:0,width:0},onChange:e.set}),g=e=>{b.setState({isExpanded:e.is_expanded,height:e.height,width:e.width,stableHeight:e.is_state_stable?e.height:void 0})},v=e=>{b.setState({isFullscreen:e.is_fullscreen})},w=e=>{b.setState({safeAreaInsets:e})},F=e=>{b.setState({contentSafeAreaInsets:e})},S=new sc({initialState(e){let t=t=>()=>{let[s,r]="safe-area"===t?["web_app_request_safe_area","safe_area_changed"]:["web_app_request_content_safe_area","content_safe_area_changed"];return eU(s,th(f))?c(s,r,e):tL({top:0,left:0,right:0,bottom:0})},s=e=>()=>"boolean"==typeof e?tL(e):tT(e());return e4(tG,tW("safeAreaInsets",t("safe-area")),tW("contentSafeAreaInsets",t("content-safe-area")),tW("isFullscreen",s(h)),tW("isViewportStable",s(p)),tD(({isViewportStable:t,...s})=>t?tL({...s,height:window.innerHeight,isExpanded:!0,stableHeight:window.innerHeight,width:window.innerWidth}):e4(c("web_app_request_viewport","viewport_changed",e),tO(e=>({...s,height:e.height,isExpanded:e.is_expanded,stableHeight:e.is_state_stable?e.height:0,width:e.width})))))},isPageReload:t,onMounted(e){n(g),i(v),r(w),s(F),b.setState(e)},onUnmounted(){l(g),a(v),u(w),o(F)},restoreState:e.get}),k=e=>(0,y.computed)(()=>this.safeAreaInsets()[e]),E=e=>(0,y.computed)(()=>this.contentSafeAreaInsets()[e]);this.state=b.state,this.height=b.getter("height"),this.stableHeight=b.getter("stableHeight"),this.width=b.getter("width"),this.isExpanded=b.getter("isExpanded"),this.safeAreaInsets=b.getter("safeAreaInsets"),this.safeAreaInsetTop=k("top"),this.safeAreaInsetBottom=k("bottom"),this.safeAreaInsetLeft=k("left"),this.safeAreaInsetRight=k("right"),this.contentSafeAreaInsets=b.getter("contentSafeAreaInsets"),this.contentSafeAreaInsetTop=E("top"),this.contentSafeAreaInsetBottom=E("bottom"),this.contentSafeAreaInsetLeft=E("left"),this.contentSafeAreaInsetRight=E("right");const x=t5({isTma:d,returns:"task"}),I=t5({isTma:d,returns:"either"}),A=t5({isTma:d,requires:"web_app_request_fullscreen",version:f,returns:"task"}),T=e=>A(t=>e4(c(e?"web_app_request_fullscreen":"web_app_exit_fullscreen",["fullscreen_changed","fullscreen_failed"],t),tD(e=>"fullscreen_failed"===e.event&&"ALREADY_FULLSCREEN"!==e.payload.error?tV(new t2(e.payload.error)):(b.setState({isFullscreen:!("is_fullscreen"in e.payload)||e.payload.is_fullscreen}),tL(void 0)))));this.isMounted=S.isMounted,this.mountFp=x(S.mount),this.mount=tk(this.mountFp),this.isFullscreen=b.getter("isFullscreen"),this.requestFullscreenFp=T(!0),this.requestFullscreen=tk(this.requestFullscreenFp),this.exitFullscreenFp=T(!1),this.exitFullscreen=tk(this.exitFullscreenFp);const q=(0,y.signal)(!1);this.isCssVarsBound=(0,y.computed)(q),this.bindCssVarsFp=I(e=>{if(q())return e9(new tz);e||(e=e=>`--tg-viewport-${(0,C.camelToKebab)(e)}`);let t=[["height",this.height],["stableHeight",this.stableHeight],["width",this.width],["safeAreaInsetTop",this.safeAreaInsetTop],["safeAreaInsetBottom",this.safeAreaInsetBottom],["safeAreaInsetLeft",this.safeAreaInsetLeft],["safeAreaInsetRight",this.safeAreaInsetRight],["contentSafeAreaInsetTop",this.contentSafeAreaInsetTop],["contentSafeAreaInsetBottom",this.contentSafeAreaInsetBottom],["contentSafeAreaInsetLeft",this.contentSafeAreaInsetLeft],["contentSafeAreaInsetRight",this.contentSafeAreaInsetRight]].reduce((t,[s,r])=>{let n=e(s);if(n){let e=()=>{sC(n,`${r()}px`)};t.push({update:e,removeListener:r.sub(e),cssVar:n})}return t},[]);return t.forEach(e=>{e.update()}),q.set(!0),e7(()=>{t.forEach(e=>{e.removeListener(),sF(e.cssVar)}),q.set(!1)})}),this.bindCssVars=tk(this.bindCssVarsFp),this.expandFp=I(()=>_("web_app_expand")),this.expand=tk(this.expandFp)}}({...e4(t7(),si("viewport"),sa,sr,sd),isFullscreen:()=>e4(eo(),ti(e=>!!e.tgWebAppFullscreen)),isViewportStable:()=>e4(eo(),ti(e=>["macos","tdesktop","unigram","webk","weba","web"].includes(e.tgWebAppPlatform))),offContentSafeAreaInsetsChanged:u.off,offFullscreenChanged:o.off,offSafeAreaInsetsChanged:a.off,offViewportChanged:i.off,onContentSafeAreaInsetsChanged:u.on,onFullscreenChanged:o.on,onSafeAreaInsetsChanged:a.on,onViewportChanged:i.on})),sV=(0,C.throwifyFpFn)(function(e={}){let{version:t,isInlineMode:s,themeParams:r}=e;if(t&&"boolean"==typeof s&&r)so.set(t),sM.set(s),sk.set(r);else{let e=e4(eo(),tu(e=>e,e=>{so.set(t||e.tgWebAppVersion),sM.set("boolean"==typeof s?s:!!e.tgWebAppBotInline),sk.set(r||e.tgWebAppThemeParams)}));if(e)return e9(e)}e.postEvent&&st.set(e.postEvent);let[n,i]=(0,C.createCbCollector)(eI("reload_iframe",()=>{ew().log("Received a request to reload the page"),((...e)=>(0,C.throwifyAnyEither)(ss(...e)))("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:o=!0}=e;if(o){let e=document.createElement("style");e.id="telegram-custom-styles",document.head.appendChild(e),n(eI("set_custom_style",t=>{e.innerHTML=t}),()=>{document.head.removeChild(e)})}return e4(ss("iframe_ready",{reload_supported:!0}),ti(()=>(ew().log("The package was initialized"),i)))});e.s(["backButton",()=>sl,"init",()=>sV,"initData",()=>sg,"miniApp",()=>sI,"openLink",()=>sv,"retrieveAndroidDeviceData",()=>sR,"retrieveAndroidDeviceDataFrom",()=>sP,"themeParams",()=>sE,"viewport",()=>sB],35205)}]);