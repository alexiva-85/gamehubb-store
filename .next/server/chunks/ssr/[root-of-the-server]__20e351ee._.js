module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},78830,(a,b,c)=>{"use strict";b.exports=a.r(30770).vendored.contexts.AppRouterContext},58975,(a,b,c)=>{"use strict";b.exports=a.r(30770).vendored.contexts.HooksClientContext},47308,(a,b,c)=>{"use strict";b.exports=a.r(30770).vendored.contexts.ServerInsertedHtml},42133,a=>{"use strict";var b=a.i(14046),c=a.i(98154),d=a.i(88572),e=a.i(95407),f=a.i(46749),g=a.i(69976),h=a.i(45589),i=a.i(13589),j=a.i(29735),k=a.i(82496),l=a.i(15890),m=a.i(30952);let n=(0,f.forwardRef)((a,n)=>{let o;var{children:p,titleBadge:q,hint:r,subhead:s,subtitle:t,description:u,className:v,before:w,after:x,Component:y,hovered:z,multiline:A}=a,B=(0,d._)(a,["children","titleBadge","hint","subhead","subtitle","description","className","before","after","Component","hovered","multiline"]);let C=(0,i.usePlatform)(),{Title:D,Description:E}=(o="ios"===(0,i.usePlatform)(),{Title:(0,f.useCallback)(a=>o?(0,e.jsx)(m.Text,(0,b._)({},a)):(0,e.jsx)(k.Subheadline,(0,b._)({level:"1"},a)),[o]),Description:(0,f.useCallback)(a=>o?(0,e.jsx)(l.Caption,(0,b._)({},a)):(0,e.jsx)(k.Subheadline,(0,b._)({level:"2"},a)),[o])}),F=(0,h.hasReactNode)(p)||(0,h.hasReactNode)(r)||(0,h.hasReactNode)(q);return(0,e.jsxs)(j.Tappable,(0,c._)((0,b._)({ref:n,Component:y||"div",className:(0,g.classNames)("tgui-b8dfba0b5c3d054c","ios"===C&&"tgui-7b5bccbb645b495f",z&&"tgui-7edaaf0c57797623",A&&"tgui-6c49dadccf648a5b",v)},B),{children:[(0,h.hasReactNode)(w)&&(0,e.jsx)("div",{className:"tgui-aaa795d78c356ac1",children:w}),(0,e.jsxs)("div",{className:"tgui-8735a62be5a8b8a7",children:[(0,h.hasReactNode)(s)&&(0,e.jsx)(k.Subheadline,{className:"tgui-46dd90b57ffed25f",level:"2",weight:"3",children:s}),F&&(0,e.jsxs)(D,{className:"tgui-a894f59f4c5ad72f",children:[(0,h.hasReactNode)(p)&&(0,e.jsx)("span",{className:"tgui-1c6d7865a76a19bc",children:p}),(0,h.hasReactNode)(r)&&(0,e.jsx)("span",{className:"tgui-bb909928b48f948b",children:r}),(0,h.hasReactNode)(q)&&q]}),(0,h.hasReactNode)(t)&&(0,e.jsx)(k.Subheadline,{className:"tgui-d528ef65a8b76273",level:"2",weight:"3",children:t}),(0,h.hasReactNode)(u)&&(0,e.jsx)(E,{className:"tgui-fc059ed3ac5799a6",children:u})]}),(0,h.hasReactNode)(x)&&(0,e.jsx)("div",{className:"tgui-56b2e897ed7ccb22",children:x})]}))});a.s(["Cell",0,n],42133)},28940,a=>{"use strict";var b=a.i(95407);function c({type:a="info",children:c,className:d}){return(0,b.jsx)("div",{className:d,style:{padding:"12px 16px",color:(()=>{switch(a){case"error":return"var(--tg-theme-destructive-text-color, #ff3b30)";case"warning":return"var(--tg-theme-hint-color, #ff9500)";case"success":return"var(--tg-theme-link-color, #34c759)";default:return"var(--tg-theme-hint-color, #999999)"}})(),backgroundColor:"var(--tg-theme-secondary-bg-color, #f1f1f1)",borderRadius:"8px",margin:"8px 16px",fontSize:"14px",lineHeight:"1.4"},children:c})}a.s(["Banner",()=>c])},32383,a=>{"use strict";var b=a.i(95407);function c({amountKopeks:a,currency:c="RUB",className:d}){let e=`${(a/100).toFixed(2)} ${c}`;return(0,b.jsx)("span",{className:d,children:e})}a.s(["Price",()=>c])},19032,76918,a=>{"use strict";function b(){return null}function c(a){}async function d(a){return!1}function e(a){}async function f(a){let b=(a.headers.get("Content-Type")??"").includes("application/json"),c=b?await a.json().catch(()=>({})):await a.text();if(!a.ok){let d=Error(b&&c?.error||("string"==typeof c?c:"Request failed"));throw d.status=a.status,d.payload=c,d}return c}function g(a){let c={"Content-Type":"application/json"};if(a?.auth){let a=b();if(!a){let b=process.env.NEXT_PUBLIC_E2E_TG_INIT_DATA??process.env.E2E_TG_INIT_DATA;"string"==typeof b&&b.length>0&&(a=b)}a&&(c["x-telegram-init-data"]=a)}return a?.idempotencyKey&&(c["x-idempotency-key"]=a.idempotencyKey),c}async function h(a,b){return f(await fetch(a,{method:"GET",headers:g(b),signal:b?.signal}))}async function i(a,b,c){return f(await fetch(a,{method:"POST",headers:g(c),body:JSON.stringify(b??{}),signal:c?.signal}))}a.s(["copyToClipboard",()=>d,"getInitData",()=>b,"openExternal",()=>c,"openSupport",()=>e],76918),a.s(["apiGet",()=>h,"apiPost",()=>i],19032)},45263,a=>{"use strict";var b=a.i(95407);function c({width:a,height:c,className:d,variant:e="text"}){let f={};return a&&(f.width="number"==typeof a?`${a}px`:a),c&&(f.height="number"==typeof c?`${c}px`:c),"circular"===e&&(f.borderRadius="50%"),(0,b.jsx)("div",{className:`${"text"===e?"skeleton skeleton-text":"card"===e?"skeleton skeleton-card":"skeleton"} ${d||""}`,style:f})}a.s(["Skeleton",()=>c])},98472,a=>{"use strict";var b=a.i(95407),c=a.i(46749);a.i(62720);var d=a.i(97429),e=a.i(42133),f=a.i(75535),g=a.i(39150),h=a.i(14993),i=a.i(74547),j=a.i(15149),k=a.i(28940),l=a.i(32383),m=a.i(45263),n=a.i(19032),o=a.i(84093),p=a.i(28610);function q(){let{cart:a,updateQty:q,remove:r}=(0,p.useCart)(),[s,t]=(0,c.useState)({}),[u,v]=(0,c.useState)(!0),[w,x]=(0,c.useState)(null);(0,c.useEffect)(()=>{0===(0,o.getCart)().length?v(!1):(async()=>{try{let a=await (0,n.apiGet)("/api/products"),b={};for(let c of a)b[c.id]=c;t(b),x(null)}catch(a){console.error(a),x("Не удалось загрузить данные товаров")}finally{v(!1)}})()},[]);let y=(0,c.useMemo)(()=>{let b=0;for(let c of a){let a=s[c.productId];a&&(b+=a.priceKopeks*c.qty)}return b},[a,s]),z=(0,c.useMemo)(()=>{let b=a.find(a=>s[a.productId]);return b?s[b.productId].currency:"RUB"},[a,s]),A=(b,c)=>{let d=a.find(a=>a.productId===b),e=d?.qty??0;c<0&&e<=1?r(b):q(b,e+c)},B=a.length>0&&y>0,C=B?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{style:{marginBottom:12,fontSize:18,fontWeight:600},children:["Итого: ",(0,b.jsx)(l.Price,{amountKopeks:y,currency:z})]}),(0,b.jsx)(h.Link,{href:"/checkout",children:(0,b.jsx)(d.Button,{size:"m",mode:"filled",stretched:!0,children:"Перейти к оплате"})})]}):null;return(0,b.jsx)(i.Page,{children:(0,b.jsx)(j.AppShell,{title:"Корзина",showBottomNav:!0,stickyBottom:C,children:(0,b.jsx)(f.List,{children:(0,b.jsxs)(g.Section,{header:"Товары в корзине",children:[u&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Skeleton,{variant:"card"}),(0,b.jsx)(m.Skeleton,{variant:"card"})]}),!u&&w&&(0,b.jsx)(k.Banner,{type:"error",children:w}),!u&&!w&&!B&&(0,b.jsxs)(k.Banner,{type:"info",children:["Корзина пуста."," ",(0,b.jsx)(h.Link,{href:"/catalog",children:"Перейти в каталог"})]}),!u&&!w&&B&&a.map(a=>{let c=s[a.productId];if(!c)return null;let f=c.priceKopeks*a.qty;return(0,b.jsx)(e.Cell,{subtitle:(0,b.jsx)(l.Price,{amountKopeks:f,currency:c.currency}),after:(0,b.jsxs)("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[(0,b.jsx)(d.Button,{size:"s",mode:"bezeled",onClick:()=>A(a.productId,-1),children:"-"}),(0,b.jsx)("span",{style:{minWidth:"24px",textAlign:"center"},children:a.qty}),(0,b.jsx)(d.Button,{size:"s",mode:"bezeled",onClick:()=>A(a.productId,1),children:"+"}),(0,b.jsx)(d.Button,{size:"s",mode:"bezeled",onClick:()=>{r(a.productId)},style:{color:"var(--tg-theme-destructive-text-color, #ff3b30)"},children:"✕"})]}),children:c.title},a.productId)})]})})})})}a.s(["default",()=>q])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__20e351ee._.js.map