# –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–µ–ø–ª–æ—é

## ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ

1. **–î–∏–∑–∞–π–Ω-—Å–∫–µ–ª–µ—Ç**: –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ AppShell, ProductCard, Price, Banner, Skeleton
2. **–°—Ç—Ä–∞–Ω–∏—Ü—ã**: –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. **TypeScript**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ (Next.js 16 params, Button appearance)
4. **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è theme params —á–µ—Ä–µ–∑ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã, —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è

### 1. Prisma 7 Build Error ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ —Å–±–æ—Ä–∫–µ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ `PrismaClientConstructorValidationError: Using engine type "client" requires either "adapter" or "accelerateUrl"`

**–†–µ—à–µ–Ω–∏–µ**: 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Proxy –ø–æ–¥—Ö–æ–¥ –¥–ª—è lazy initialization Prisma Client
- Prisma Client —Ç–µ–ø–µ—Ä—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è runtime, –∞ –Ω–µ –≤–æ –≤—Ä–µ–º—è build
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `src/lib/prismaClient.ts` –∏ `next.config.ts`

### 2. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚úÖ –ü–†–û–í–ï–†–ï–ù–û
**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
```env
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
TG_BOT_TOKEN=your_bot_token                    # –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞
ROBOKASSA_MERCHANT_LOGIN=your_merchant_login    # –õ–æ–≥–∏–Ω –º–∞–≥–∞–∑–∏–Ω–∞ Robokassa
ROBOKASSA_PASSWORD1=your_password1             # –ü–∞—Ä–æ–ª—å #1 –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ –ø–ª–∞—Ç–µ–∂–µ–π
ROBOKASSA_PASSWORD2=your_password2             # –ü–∞—Ä–æ–ª—å #2 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ webhook
APP_BASE_URL=https://your-domain.com           # –ë–∞–∑–æ–≤—ã–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
DATABASE_URL=postgresql://...                   # PostgreSQL URL (–ù–ï SQLite –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞!)
ADMIN_KEY=your_secret_admin_key                 # –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è admin endpoints

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
ROBOKASSA_TEST_MODE=true                        # –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (true/false)
ROBOKASSA_API_BASE_URL=https://auth.robokassa.ru/Merchant/Index.aspx
FULFILLMENT_PROVIDER=mock                       # mock –∏–ª–∏ digiflazz
DIGIFLAZZ_API_KEY=...                          # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è digiflazz
DIGIFLAZZ_USERNAME=...                          # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è digiflazz
DIGIFLAZZ_BASE_URL=https://api.digiflazz.com/v1 # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
NEXT_PUBLIC_SUPPORT_BOT_USERNAME=support        # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "support"
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:**
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –∫–æ–¥–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—à–∏–±–∫–∏ 500, –µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- `APP_BASE_URL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è URL webhook'–æ–≤ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
- `DATABASE_URL` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (SQLite –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production)

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ –ù–ê–°–¢–†–û–ï–ù–û
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –°—Ö–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ PostgreSQL (`provider = "postgresql"` –≤ `prisma/schema.prisma`)
- ‚úÖ `DATABASE_URL` –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `prisma.config.ts`

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
1. **–°–æ–∑–¥–∞—Ç—å PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —Å–µ—Ä–≤–∏—Å–æ–≤:
   - Vercel Postgres
   - Railway
   - Render
   - Supabase
   - Neon

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `DATABASE_URL`** –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```
   DATABASE_URL=postgresql://user:password@host:5432/dbname
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**
   ```bash
   pnpm db:migrate:deploy
   ```

4. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**
   ```bash
   pnpm db:seed
   ```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (SQLite –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞)

## üìã –®–∞–≥–∏ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):

1. ‚úÖ **Prisma build error** - –ò–°–ü–†–ê–í–õ–ï–ù–û (Proxy –ø–æ–¥—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç)
2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏** - –ü–†–û–ô–î–ï–ù–ê (`pnpm run build` —É—Å–ø–µ—à–Ω–æ)
3. ‚ö†Ô∏è **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ:
   - –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. —Ä–∞–∑–¥–µ–ª 2)
   - –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ: `APP_BASE_URL`, `DATABASE_URL`, `TG_BOT_TOKEN`, `TBANK_*`
4. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL** - –ù–ê–°–¢–†–û–ï–ù–û:
   - ‚úÖ `prisma/schema.prisma` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ PostgreSQL
   - ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ
   - ‚ö†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `DATABASE_URL` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
5. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏**: `pnpm db:migrate:deploy` (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL)
6. **–ó–∞–ø—É—Å—Ç–∏—Ç—å seed** (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ): `pnpm prisma db seed`
7. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook URL** –≤ T-Bank: `https://your-domain.com/api/payments/tbank/notification`

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:

8. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: `.env` —Ñ–∞–π–ª—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `.gitignore`
9. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**: –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
10. ‚ö†Ô∏è **Digiflazz –ø—Ä–æ–≤–∞–π–¥–µ—Ä**: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å (—Å–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∞)
11. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ï—Å—Ç—å error boundaries –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ API
12. ‚úÖ **–¢–µ—Å—Ç—ã**: Unit –∏ E2E —Ç–µ—Å—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è –¥–µ–ø–ª–æ—è

- **Vercel** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è Next.js)
- **Railway**
- **Render**
- **Fly.io**

## ‚ö° –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:**
   - `/catalog` - –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
   - `/cart` - –∫–æ—Ä–∑–∏–Ω–∞
   - `/checkout` - –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
   - `/orders/[id]` - —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞:**
   - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –ø–ª–∞—Ç–µ–∂–∞ –≤ T-Bank
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook –æ—Ç T-Bank:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ webhook URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å fulfillment:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ fulfillment –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ fulfillment –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å retry —á–µ—Ä–µ–∑ admin endpoint (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Vercel Analytics)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏ (Sentry, etc.)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **`.gitignore`** - –î–æ–±–∞–≤–ª–µ–Ω `.env` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤
2. **–°–±–æ—Ä–∫–∞** - –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞, —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –ù—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è —Å SQLite –Ω–∞ PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. **Digiflazz –ø—Ä–æ–≤–∞–π–¥–µ—Ä** - –ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å (—Å–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∞)
3. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:
- –ö–æ–¥ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥—è—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- API endpoints –∑–∞—â–∏—â–µ–Ω—ã (Telegram auth, admin key)
- Webhook –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ (T-Bank signature verification)

